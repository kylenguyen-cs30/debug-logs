Script started on 2025-10-14 18:58:32-07:00 [TERM="xterm-256color" TTY="/dev/pts/1" COLUMNS="252" LINES="54"]
[1m[7m%[27m[1m[0m                                                                                                                                                                                                                                                            ]2;kyle@kyle:~]1;~[0m[27m[24m[J[01;32mâžœ  [36m~[00m [K[?1h=[?2004hc[32mc[39m[32mc[39m[90md ../mvp-llm-python-sever[39m[25D
[0;1;2mcommand[0m
[0mc                        c++                     c++-15                  c89                 c89-gcc    c99          c99-gcc                    cacaclock          cacademo            cacafire          cacaplay                 cacaserver           
cacaview                 caffeinate              caffeine                caffeine-indicator  cal        cameratopam  cancel                     capsh              captoinfo           cargo             cargo-clippy             cargo-fmt            
cargo-miri               case                    cat                     catman              cc         ccmake       cd                         cd-create-profile  cd-fix-profile      cd-iccdump        cd-it8                   cdrdao               
cfdisk                   c++filt                 chacl                   chafa               chage      chardet      chardetect                 chattr             chcon               chcpu             chdir                    cheese               
chfn                     chgrp                   chmem                   chmod               choom      chown        chpwd_recent_filehandler   chrt               chruby_prompt_info  chsh              chvt                     ciptool              
cistopbm                 cjpeg                   cjxl                    ckbcomp             cksum      clear        clear_console              clipcopy           clippaste           clippy-driver     cloudflared              cmake                
cmp                      cmuwmtopbm              codepage                col                 colcrt     colormgr     colors                     colrm              column              comm              command                  compadd              
compare                  compare-im6             compare-im6.q16         comparguments       compaudit  compcall     compctl                    compdef            compdescribe        compdump          compfiles                compgen              
compgroups               compile_et              compinit                compinstall         complete   compose      composite                  composite-im6      composite-im6.q16   compquote         compset                  comptags             
comptry                  compute-sanitizer       compvalues              conda_prompt_info   conjure    conjure-im6  conjure-im6.q16            continue           convert             convert-im6       convert-im6.q16          coproc               
corelist                 corepack                coresched               cp                  cpack      cpan         cpan5.36-x86_64-linux-gnu  cpio               cpp                 cpp-11            cpp-12                   cpp-15               
c_rehash                 crontab                 crt                     csplit              ctest      ctrlaltdel   ctstat                     cudafe++           cuda-gdb            cuda-gdb-minimal  cuda-gdb-python3.10-tui  cuda-gdb-python3.11-tui
cuda-gdb-python3.12-tui  cuda-gdb-python3.8-tui  cuda-gdb-python3.9-tui  cuda-gdbserver      cu++filt   cuobjdump    cupstestppd                curl               curl-config         current_branch    cut                      cvt                  
[Jcvtsudoers               [Jcwebp                   [J                                                                                                                                                                                    [15A[0m[27m[24m[5C[32mc[39m[90md ../mvp-llm-python-sever[39m[K[25D[32mc[32md[39m
[J[0;1;2mcommand[0m
[J[0mcd                 [Jcd-create-profile  [Jcd-fix-profile     [Jcd-iccdump         [Jcd-it8             [Jcdrdao           [J[A[A[0m[27m[24m[5C[32mcd[39m[90m ../mvp-llm-python-sever[39m[K[24D[32mc[32md[32m [39m
[J[A[8C[32mc[32md[39m[39m 
[J[0;1;2mdirectory[0m
[J[01;34masus-tools[0m/   [J[01;34mDeployments[0m/  [J[01;34mDesktop[0m/      [J[01;34mDocuments[0m/    [J[01;34mDownloads[0m/    [J[01;34mllama.cpp[0m/    [J[01;34mmcp-env[0m/      [J[01;34mMusic[0m/        [J[01;34mPictures[0m/     [J[01;34mPublic[0m/       [J[01;34mTemplates[0m/    [J[01;34mVideos[0m/     [J[A[A[0m[27m[24m[5C[32mcd[39m [90m../mvp-llm-python-sever[39m[K[23D[39md[39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [22D[90mebug-logs[39m[9D[30m[103m[39m[49m[30m[103m[39m[49m
[J[0;1;2mdirectory[0m
[01;34mDeployments[0m/  [01;34mDesktop[0m/      [01;34mDocuments[0m/    [01;34mDownloads[0m/  
[J[0;2m[1mcommon substring:[0m [30m[103mD[39m[49m[3A[0m[27m[24m[5C[32mcd[39m d[90mebug-logs[39m[K[9D[39me[30m[103m[39m[49m[30m[103m[39m[49m
[J[0;1;2mdirectory[0m
[01;34mDeployments[0m/  [01;34mDesktop[0m/    
[J[0;2m[1mcommon substring:[0m [30m[103mDe[39m[49m[3A[0m[27m[24m[5C[32mcd[39m de[90mbug-logs[39m[K[8D
[J[A[10C[39mb[39mu[39mg[39m-[39ml[39mo[39mg[39ms[8D[4mD[4me[4mp[4ml[4mo[4my[4mm[4me[4mn[4mt[4ms[1m[4m/[0m[24m
[J[0;1;2mdirectory[0m
[J[01;34mdebug-logs[0m/            [J[01;34mmcp-server-taskler[0m/    [J[01;34mmvp-llm-python-sever[0m/[J[A[A[0m[27m[24m[5C[32mcd[39m [4mDeployments[1m[4m/[0m[24m[K[1m[4m/[1m[4mm[0m[24m[0m[4m/[0m[4mm[24m[90mvp-llm-python-sever[39m[19D
[J[0;1;2mdirectory[0m
[J[01;34mmcp-server-taskler[0m/    [J[01;34mmvp-llm-python-sever[0m/[J[A[A[0m[27m[24m[5C[32mcd[39m [4mDeployments/m[24m[90mvp-llm-python-sever[39m[K[19D[4mm[39m[4mc[24m[39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [18D[90mp-server-taskler[39m[16D
[J[0;1;2mdirectory[0m
[J[01;34mmcp-server-taskler[0m/[J[A[A[0m[27m[24m[5C[32mcd[39m [4mDeployments/mc[24m[90mp-server-taskler[39m[K[16D[4mc[39m[4mp[24m
[J[0;1;2mdirectory[0m
[J[01;34mmcp-server-taskler[0m/[J[A[A[0m[27m[24m[5C[32mcd[39m [4mDeployments/mcp[24m[90m-server-taskler[39m[K[15D
[J[A[23C[39m-[39ms[39me[39mr[39mv[39me[39mr[39m-[39mt[39ma[39ms[39mk[39ml[39me[39mr[15D[4mp[4m-[4ms[4me[4mr[4mv[4me[4mr[4m-[4mt[4ma[4ms[4mk[4ml[4me[4mr[1m[4m/[0m[24m
[J[0;1;2mdirectory[0m
[J[01;34mdist[0m/          [J[01;34mnode_modules[0m/  [J[01;34msrc[0m/         [J[A[A[0m[27m[24m[5C[32mcd[39m [4mDeployments/mcp-server-taskler[1m[4m/[0m[24m[K[4mr[24m[0m[24m [?1l>[?2004l
[J[A[38C
[J]2;cd Deployments/mcp-server-taskler]1;cd[1m[7m%[27m[1m[0m                                                                                                                                                                                                                                                            ]2;kyle@kyle:~/Deployments/mcp-server-taskler]1;..erver-taskler[0m[27m[24m[J[01;32mâžœ  [36mmcp-server-taskler[00m [K[?1h=[?2004h[0m[27m[24m[J[01;32mâžœ  [36mmcp-server-taskler[00m [01;34mgit:([31mframework-change[34m)[00m [Kb[1m[31mb[0m[39m[1m[31mb[0m[39m[90mun test src/tests/api/schedules-bun.test.ts[39m[43D
[0;1;2mcommand[0m
[0mb2sum        baobab    base32      base64      basename        basenc     bash           bashbug       bashcompinit  bc           bdftogd          bdftopcf  bdftruncate   benchmark_xl      bf_compact             bf_compact-bdb  bf_copy       
bf_copy-bdb  bf_tar    bf_tar-bdb  bg          bin2c           bindkey    bioradtopgm    bitmap        bits          blkdiscard   blkid            blkpr     blkzone       blockdev          bluemoon               bluetoothctl    bluetooth-sendto
bmptopnm     bmptoppm  bmtoa       bogofilter  bogofilter-bdb  bogolexer  bogolexer-bdb  bogotune      bogotune-bdb  bogoupgrade  bogoupgrade-bdb  bogoutil  bogoutil-bdb  boltctl           bracketed-paste-magic  break           brew          
broadwayd    brotli    brushtopbm  btattach    btmgmt          btmon      buildhash      builtin       bun           bunx         bunzip2          busctl    busybox       butteraugli_main  bwrap                  bye             bzcat         
[Jbzcmp        [Jbzdiff    [Jbzegrep     [Jbzexe       [Jbzfgrep         [Jbzgrep     [Jbzip2          [Jbzip2recover  [Jbzless        [Jbzmore       [Jbzr_prompt_info  [J                                                                                     [6A[0m[27m[24m[45C[1m[31mb[0m[39m[90mun test src/tests/api/schedules-bun.test.ts[39m[K[43D[1m[31mb[1m[31mu[0m[39m
[J[0;1;2mcommand[0m
[J[0mbuildhash         [Jbuiltin           [Jbun               [Jbunx              [Jbunzip2           [Jbusctl            [Jbusybox           [Jbutteraugli_main[J[A[A[0m[27m[24m[45C[1m[31mbu[0m[39m[90mn test src/tests/api/schedules-bun.test.ts[39m[K[42D[1m[31mb[1m[31mu[1m[31mn[0m[39m[0m[32mb[0m[32mu[0m[32mn[39m
[J[0;1;2mcommand[0m
[J[0mbun      [Jbunx     [Jbunzip2[J[A[A[0m[27m[24m[45C[32mbun[39m[90m test src/tests/api/schedules-bun.test.ts[39m[K[41D[32mn[32m [39m
[J[A[49C[32mn[39m[39m [32m[39m[32m[39m[32m[39m[32m[39m[32m[39m[32m[39m[32m[39m[32m[39m[32m[39m[32m[39m[32m[39m[32m[39m[30m[104m[39m[49m[32m[39m[32m[39m[30m[104m[39m[49m[32m[39m[32m[39m[30m[104m[39m[49m
[J[32m-- scripts --[39m
[0mdev        start      typecheck
[32m-- command --[39m
[0madd       -- Add a dependency to package.json (bun a)
create    -- Create a new project from a template (bun c)
init      -- Start an empty Bun project from a blank template
install   -- Install dependencies for a package.json (bun i)
link      -- Link an npm package globally
outdated  -- Display the latest versions of outdated dependencies
remove    -- Remove a dependency from package.json (bun rm)
repl      -- Start a REPL session with Bun
run       -- Run JavaScript with Bun, a package.json script, or a bin
test      -- Run unit tests with Bun
unlink    -- Globally unlink an npm package
update    -- Update outdated dependencies & save to package.json
x         -- Install and execute a package bin (bunx)
[J[30m[104m(MORE)[39m[49m[17A[0m[27m[24m[45C[32mbun[39m [90mtest src/tests/api/schedules-bun.test.ts[39m[K[40D[39mt[4mt[24m[32m[39m[32m[39m[32m[39m[32m[39m[32m[39m[32m[39m[32m[39m[32m[39m[32m[39m[32m[39m[32m[39m[32m[39m[32m[39m[32m[39m[32m[39m[32m[39m
[J[32m-- scripts --[39m
[0mtypecheck
[32m-- command --[39m
[J[0mtest  -- Run unit tests with Bun[J[4A[0m[27m[24m[45C[32mbun[39m [4mt[24m[90mest src/tests/api/schedules-bun.test.ts[39m[K[39D[4mt[39m[4me[24m[24mt[24me[39ms[32m[39m[32m[39m[32m[39m[32m[39m
[J[32m-- command --[39m
[J[0mtest  -- Run unit tests with Bun[J[A[A[0m[27m[24m[45C[32mbun[39m tes[90mt src/tests/api/schedules-bun.test.ts[39m[K[37D[39mt[32m[39m[32m[39m[32m[39m[32m[39m
[J[32m-- command --[39m
[J[0mtest  -- Run unit tests with Bun[J[A[A[0m[27m[24m[45C[32mbun[39m test[90m src/tests/api/schedules-bun.test.ts[39m[K[36D[39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [36D[?1l>[?2004l
[J[A[53C
[J]2;bun test]1;bun[0m[1mbun test [0m[2mv1.3.0 (b0a6feca)[0m
[0m
src/tests/api/schedules.test.ts:
[dotenv@17.2.3] injecting env (0) from .env [2m-- tip: ðŸ“¡ add observability to secrets: https://dotenvx.com/ops[0m
Loaded MODEL_PARSE: /home/kyle/.models/mistral-7b-instruct-v0.1.Q4_K_M.gguf
[]
User Input:  How are you doing?
classifyIntent is called
Intent returned :  other
response from LLM SERVER :  {
  [0mnatural_response[2m:[0m [0m[32m[0m[32m"I'm here to help with your schedule! What task can I assist with today?"[0m[0m[0m[2m,[0m
}
Generated response:  I'm here to help with your schedule! What task can I assist with today?
naturalResponse/other :  I'm here to help with your schedule! What task can I assist with today?
 [0m[1m5 |[0m [0m[35mimport[0m { describe, expect, it, jest } [0m[35mfrom[0m [0m[32m"@jest/globals"[0m[0m[2m;[0m
 [0m[1m6 |[0m [0m[35mimport[0m { fileURLToPath } [0m[35mfrom[0m [0m[32m"url"[0m[0m[2m;[0m
 [0m[1m7 |[0m 
 [0m[1m8 |[0m [0m[35mfunction[0m parseNdjsonResponse(res: [0m[34many[0m): [0m[34many[0m[] {
 [0m[1m9 |[0m   [0m[35mconst[0m chunks: [0m[34many[0m[] = [][0m[2m;[0m
[0m[1m10 |[0m   [0m[35mconst[0m lines = res.text[0m[3m[1m.split[0m([0m[32m"\n"[0m)[0m[3m[1m.filter[0m((line) => line[0m[3m[1m.trim[0m())[0m[2m;[0m
                              [31m[1m^[0m
[0m[31mTypeError[0m[2m:[0m [1mres.text.split is not a function. (In 'res.text.split(`
`)', 'res.text.split' is undefined)[0m
[0m      [2mat [0m[0m[1m[3mparseNdjsonResponse[0m[2m ([0m[0m[36m[2m/home/kyle/Deployments/mcp-server-taskler/[0m[36msrc/tests/api/schedules.test.ts[0m[2m:[0m[33m10[0m[2m:[33m26[0m[2m)[0m
[0m      [2mat [0m[0m[2m<anonymous>[0m[2m ([0m[0m[36m[2m/home/kyle/Deployments/mcp-server-taskler/[0m[36msrc/tests/api/schedules.test.ts[0m[2m:[0m[33m50[0m[2m:[33m20[0m[2m)[0m
[0m[31mâœ—[0m [0mAPI Endpoint : POST /mcp/tools/process-query[2m >[0m[1m should handle chit-chat query ("other" intent)[0m [0m[2m[[1m1379.63ms[0m[2m][0m
[]
User Input:  What is 2 + 3 * 4?
classifyIntent is called
Intent returned :  other
response from LLM SERVER :  {
  [0mnatural_response[2m:[0m [0m[32m[0m[32m"Result: t. How does this relate to your schedule ? "[0m[0m[0m[2m,[0m
}
Generated response:  Result: t. How does this relate to your schedule ? 
naturalResponse/other :  Result: t. How does this relate to your schedule ? 
 [0m[1m5 |[0m [0m[35mimport[0m { describe, expect, it, jest } [0m[35mfrom[0m [0m[32m"@jest/globals"[0m[0m[2m;[0m
 [0m[1m6 |[0m [0m[35mimport[0m { fileURLToPath } [0m[35mfrom[0m [0m[32m"url"[0m[0m[2m;[0m
 [0m[1m7 |[0m 
 [0m[1m8 |[0m [0m[35mfunction[0m parseNdjsonResponse(res: [0m[34many[0m): [0m[34many[0m[] {
 [0m[1m9 |[0m   [0m[35mconst[0m chunks: [0m[34many[0m[] = [][0m[2m;[0m
[0m[1m10 |[0m   [0m[35mconst[0m lines = res.text[0m[3m[1m.split[0m([0m[32m"\n"[0m)[0m[3m[1m.filter[0m((line) => line[0m[3m[1m.trim[0m())[0m[2m;[0m
                              [31m[1m^[0m
[0m[31mTypeError[0m[2m:[0m [1mres.text.split is not a function. (In 'res.text.split(`
`)', 'res.text.split' is undefined)[0m
[0m      [2mat [0m[0m[1m[3mparseNdjsonResponse[0m[2m ([0m[0m[36m[2m/home/kyle/Deployments/mcp-server-taskler/[0m[36msrc/tests/api/schedules.test.ts[0m[2m:[0m[33m10[0m[2m:[33m26[0m[2m)[0m
[0m      [2mat [0m[0m[2m<anonymous>[0m[2m ([0m[0m[36m[2m/home/kyle/Deployments/mcp-server-taskler/[0m[36msrc/tests/api/schedules.test.ts[0m[2m:[0m[33m79[0m[2m:[33m20[0m[2m)[0m
[0m[31mâœ—[0m [0mAPI Endpoint : POST /mcp/tools/process-query[2m >[0m[1m should handle computational-math query ("other" intent)[0m [0m[2m[[1m440.73ms[0m[2m][0m
[{"text":"tomorrow at 10 AM","start":"2025-10-10T17:00:00.000Z","end":null}]
User Input:  Schedule a meeting tomorrow at 10 AM in PDT
classifyIntent is called
events is parsed with regex:  [
  {
    [0msummary[2m:[0m [0m[32m[0m[32m"Event"[0m[0m[0m[2m,[0m
    [0mdate[2m:[0m [0m[32m[0m[32m"2025-10-10"[0m[0m[0m[2m,[0m
    [0mstartTime[2m:[0m [0m[32m[0m[32m"10:00"[0m[0m[0m[2m,[0m
    [0mendTime[2m:[0m [0m[2mundefined[0m[0m[2m,[0m
    [0mduration_minutes[2m:[0m [0m[33m60[0m[0m[2m,[0m
    [0mtimezone[2m:[0m [0m[32m[0m[32m"America/Los_Angeles"[0m[0m[0m[2m,[0m
    [0mlocation[2m:[0m [0m[32m[0m[32m"10 AM in PDT"[0m[0m[0m[2m,[0m
    [0mdisplayTime[2m:[0m [0m[32m[0m[32m"10:00 am"[0m[0m[0m[2m,[0m
  }
]
Regex partial imperfect-refining with LLM
Ready to send Payload:  {
  [0mpartial[2m:[0m {
    [0mevents[2m:[0m [
      [0m[36m[Object ...][0m
    ][0m[2m,[0m
    [0mconfirm[2m:[0m [0m[32m[0m[32m"Missing end time. Confirm default 60 minutes?"[0m[0m[0m[2m,[0m
  }[0m[2m,[0m
  [0minput[2m:[0m [0m[32m[0m[32m"Schedule a meeting tomorrow at 10 AM in PDT"[0m[0m[0m[2m,[0m
  [0mtimezone[2m:[0m [0m[32m[0m[32m"America/Los_Angeles"[0m[0m[0m[2m,[0m
  [0mreference_date[2m:[0m [0m[32m[0m[32m"2025-10-15"[0m[0m[0m[2m,[0m
  [0mparsed_results[2m:[0m [
    {
      [0mtext[2m:[0m [0m[32m[0m[32m"tomorrow at 10 AM"[0m[0m[0m[2m,[0m
      [0mstart[2m:[0m [0m[32m[0m[32m"2025-10-10T17:00:00.000Z"[0m[0m[0m[2m,[0m
      [0mend[2m:[0m [0m[33mnull[0m[0m[2m,[0m
    }
  ][0m[2m,[0m
}
Refined from server:  {
  [0mevents[2m:[0m [
    {
      [0msummary[2m:[0m [0m[32m[0m[32m"Event"[0m[0m[0m[2m,[0m
      [0mdate[2m:[0m [0m[32m[0m[32m"2025-10-10"[0m[0m[0m[2m,[0m
      [0mstartTime[2m:[0m [0m[32m[0m[32m"10:00"[0m[0m[0m[2m,[0m
      [0mendTime[2m:[0m [0m[2mundefined[0m[0m[2m,[0m
      [0mduration_minutes[2m:[0m [0m[33m60[0m[0m[2m,[0m
      [0mtimezone[2m:[0m [0m[32m[0m[32m"America/Los_Angeles"[0m[0m[0m[2m,[0m
      [0mlocation[2m:[0m [0m[32m[0m[32m"10 AM in PDT"[0m[0m[0m[2m,[0m
      [0mdisplayTime[2m:[0m [0m[32m[0m[32m"10:00 am"[0m[0m[0m[2m,[0m
    }
  ][0m[2m,[0m
  [0mconfirm[2m:[0m [0m[32m[0m[32m"Partial parse-confirm?"[0m[0m[0m[2m,[0m
}
Parsing Completed
Time Completed Parsing:  [0m[33m15904.134897[0m
 [0m[1m5 |[0m [0m[35mimport[0m { describe, expect, it, jest } [0m[35mfrom[0m [0m[32m"@jest/globals"[0m[0m[2m;[0m
 [0m[1m6 |[0m [0m[35mimport[0m { fileURLToPath } [0m[35mfrom[0m [0m[32m"url"[0m[0m[2m;[0m
 [0m[1m7 |[0m 
 [0m[1m8 |[0m [0m[35mfunction[0m parseNdjsonResponse(res: [0m[34many[0m): [0m[34many[0m[] {
 [0m[1m9 |[0m   [0m[35mconst[0m chunks: [0m[34many[0m[] = [][0m[2m;[0m
[0m[1m10 |[0m   [0m[35mconst[0m lines = res.text[0m[3m[1m.split[0m([0m[32m"\n"[0m)[0m[3m[1m.filter[0m((line) => line[0m[3m[1m.trim[0m())[0m[2m;[0m
                              [31m[1m^[0m
[0m[31mTypeError[0m[2m:[0m [1mres.text.split is not a function. (In 'res.text.split(`
`)', 'res.text.split' is undefined)[0m
[0m      [2mat [0m[0m[1m[3mparseNdjsonResponse[0m[2m ([0m[0m[36m[2m/home/kyle/Deployments/mcp-server-taskler/[0m[36msrc/tests/api/schedules.test.ts[0m[2m:[0m[33m10[0m[2m:[33m26[0m[2m)[0m
[0m      [2mat [0m[0m[2m<anonymous>[0m[2m ([0m[0m[36m[2m/home/kyle/Deployments/mcp-server-taskler/[0m[36msrc/tests/api/schedules.test.ts[0m[2m:[0m[33m109[0m[2m:[33m20[0m[2m)[0m
[0m[31mâœ—[0m [0mAPI Endpoint : POST /mcp/tools/process-query[2m >[0m[1m should handle single event add query ("add" intent)[0m [0m[2m[[0m[33m15907.22ms[0m[2m][0m
[{"text":"tomorrow at 10 AM","start":"2025-10-10T17:00:00.000Z","end":null}]
User Input:  Schedule a meeting tomorrow at 10 AM in PDT
classifyIntent is called
events is parsed with regex:  [
  {
    [0msummary[2m:[0m [0m[32m[0m[32m"Event"[0m[0m[0m[2m,[0m
    [0mdate[2m:[0m [0m[32m[0m[32m"2025-10-10"[0m[0m[0m[2m,[0m
    [0mstartTime[2m:[0m [0m[32m[0m[32m"10:00"[0m[0m[0m[2m,[0m
    [0mendTime[2m:[0m [0m[2mundefined[0m[0m[2m,[0m
    [0mduration_minutes[2m:[0m [0m[33m60[0m[0m[2m,[0m
    [0mtimezone[2m:[0m [0m[32m[0m[32m"America/Los_Angeles"[0m[0m[0m[2m,[0m
    [0mlocation[2m:[0m [0m[32m[0m[32m"10 AM in PDT"[0m[0m[0m[2m,[0m
    [0mdisplayTime[2m:[0m [0m[32m[0m[32m"10:00 am"[0m[0m[0m[2m,[0m
  }
]
Regex partial imperfect-refining with LLM
Ready to send Payload:  {
  [0mpartial[2m:[0m {
    [0mevents[2m:[0m [
      [0m[36m[Object ...][0m
    ][0m[2m,[0m
    [0mconfirm[2m:[0m [0m[32m[0m[32m"Missing end time. Confirm default 60 minutes?"[0m[0m[0m[2m,[0m
  }[0m[2m,[0m
  [0minput[2m:[0m [0m[32m[0m[32m"Schedule a meeting tomorrow at 10 AM in PDT"[0m[0m[0m[2m,[0m
  [0mtimezone[2m:[0m [0m[32m[0m[32m"America/Los_Angeles"[0m[0m[0m[2m,[0m
  [0mreference_date[2m:[0m [0m[32m[0m[32m"2025-10-15"[0m[0m[0m[2m,[0m
  [0mparsed_results[2m:[0m [
    {
      [0mtext[2m:[0m [0m[32m[0m[32m"tomorrow at 10 AM"[0m[0m[0m[2m,[0m
      [0mstart[2m:[0m [0m[32m[0m[32m"2025-10-10T17:00:00.000Z"[0m[0m[0m[2m,[0m
      [0mend[2m:[0m [0m[33mnull[0m[0m[2m,[0m
    }
  ][0m[2m,[0m
}
[0m[33m[Bun.serve][0m[2m:[0m request timed out after 10 seconds. Pass [2m[36m`idleTimeout`[0m to configure.
[0m[31mâœ—[0m [0mAPI Endpoint : POST /mcp/tools/process-query[2m >[0m[1m should handle single event add query ("add" intent)[0m [0m[2m[[0m[33m30000.80ms[0m[2m][0m
  [2m^[0m [31mthis test timed out after 30000ms.[0m
[{"text":"October 1, 2025 from 10am to 11am","start":"2025-10-01T17:00:00.000Z","end":"2025-10-01T18:00:00.000Z"},{"text":"October 2, 2025 from 12pm to 1pm","start":"2025-10-02T19:00:00.000Z","end":"2025-10-02T20:00:00.000Z"},{"text":"October 3, 2025 from 2pm to 3pm","start":"2025-10-03T21:00:00.000Z","end":"2025-10-03T22:00:00.000Z"},{"text":"October 4, 2025 from 6am to 7am","start":"2025-10-04T13:00:00.000Z","end":"2025-10-04T14:00:00.000Z"},{"text":"October 5, 2025 from 8pm to 10pm","start":"2025-10-06T03:00:00.000Z","end":"2025-10-06T05:00:00.000Z"},{"text":"October 6, 2025 from 9am to 12pm","start":"2025-10-06T16:00:00.000Z","end":"2025-10-06T19:00:00.000Z"},{"text":"October 7, 2025 from 7pm to 8pm","start":"2025-10-08T02:00:00.000Z","end":"2025-10-08T03:00:00.000Z"}]
User Input:  Add events: Meeting on October 1, 2025 from 10am to 11am at office; Lunch on October 2, 2025 from 12pm to 1pm at cafe; Call on October 3, 2025 from 2pm to 3pm; Workout on October 4, 2025 from 6am to 7am at gym; Movie on October 5, 2025 from 8pm to 10pm at theater; Hiking on October 6, 2025 from 9am to 12pm at park; Dinner on October 7, 2025 from 7pm to 8pm at home
classifyIntent is called
events is parsed with regex:  [
  {
    [0msummary[2m:[0m [0m[32m[0m[32m"events: Meeting on October 1, 2025"[0m[0m[0m[2m,[0m
    [0mdate[2m:[0m [0m[32m[0m[32m"2025-10-01"[0m[0m[0m[2m,[0m
    [0mstartTime[2m:[0m [0m[32m[0m[32m"10:00"[0m[0m[0m[2m,[0m
    [0mendTime[2m:[0m [0m[32m[0m[32m"11:00"[0m[0m[0m[2m,[0m
    [0mduration_minutes[2m:[0m [0m[33m60[0m[0m[2m,[0m
    [0mtimezone[2m:[0m [0m[32m[0m[32m"America/Los_Angeles"[0m[0m[0m[2m,[0m
    [0mlocation[2m:[0m [0m[32m[0m[32m"office"[0m[0m[0m[2m,[0m
    [0mdisplayTime[2m:[0m [0m[32m[0m[32m"10:00 am"[0m[0m[0m[2m,[0m
  }[0m[2m,[0m {
    [0msummary[2m:[0m [0m[32m[0m[32m"Lunch on October 2, 2025"[0m[0m[0m[2m,[0m
    [0mdate[2m:[0m [0m[32m[0m[32m"2025-10-02"[0m[0m[0m[2m,[0m
    [0mstartTime[2m:[0m [0m[32m[0m[32m"12:00"[0m[0m[0m[2m,[0m
    [0mendTime[2m:[0m [0m[32m[0m[32m"13:00"[0m[0m[0m[2m,[0m
    [0mduration_minutes[2m:[0m [0m[33m60[0m[0m[2m,[0m
    [0mtimezone[2m:[0m [0m[32m[0m[32m"America/Los_Angeles"[0m[0m[0m[2m,[0m
    [0mlocation[2m:[0m [0m[32m[0m[32m"cafe"[0m[0m[0m[2m,[0m
    [0mdisplayTime[2m:[0m [0m[32m[0m[32m"12:00 pm"[0m[0m[0m[2m,[0m
  }[0m[2m,[0m {
    [0msummary[2m:[0m [0m[32m[0m[32m"Call on October 3, 2025"[0m[0m[0m[2m,[0m
    [0mdate[2m:[0m [0m[32m[0m[32m"2025-10-03"[0m[0m[0m[2m,[0m
    [0mstartTime[2m:[0m [0m[32m[0m[32m"14:00"[0m[0m[0m[2m,[0m
    [0mendTime[2m:[0m [0m[32m[0m[32m"15:00"[0m[0m[0m[2m,[0m
    [0mduration_minutes[2m:[0m [0m[33m60[0m[0m[2m,[0m
    [0mtimezone[2m:[0m [0m[32m[0m[32m"America/Los_Angeles"[0m[0m[0m[2m,[0m
    [0mlocation[2m:[0m [0m[33mnull[0m[0m[2m,[0m
    [0mdisplayTime[2m:[0m [0m[32m[0m[32m"14:00 pm"[0m[0m[0m[2m,[0m
  }[0m[2m,[0m {
    [0msummary[2m:[0m [0m[32m[0m[32m"Workout on October 4, 2025"[0m[0m[0m[2m,[0m
    [0mdate[2m:[0m [0m[32m[0m[32m"2025-10-04"[0m[0m[0m[2m,[0m
    [0mstartTime[2m:[0m [0m[32m[0m[32m"06:00"[0m[0m[0m[2m,[0m
    [0mendTime[2m:[0m [0m[32m[0m[32m"07:00"[0m[0m[0m[2m,[0m
    [0mduration_minutes[2m:[0m [0m[33m60[0m[0m[2m,[0m
    [0mtimezone[2m:[0m [0m[32m[0m[32m"America/Los_Angeles"[0m[0m[0m[2m,[0m
    [0mlocation[2m:[0m [0m[32m[0m[32m"gym"[0m[0m[0m[2m,[0m
    [0mdisplayTime[2m:[0m [0m[32m[0m[32m"06:00 am"[0m[0m[0m[2m,[0m
  }[0m[2m,[0m {
    [0msummary[2m:[0m [0m[32m[0m[32m"Movie on October 5, 2025"[0m[0m[0m[2m,[0m
    [0mdate[2m:[0m [0m[32m[0m[32m"2025-10-05"[0m[0m[0m[2m,[0m
    [0mstartTime[2m:[0m [0m[32m[0m[32m"20:00"[0m[0m[0m[2m,[0m
    [0mendTime[2m:[0m [0m[32m[0m[32m"22:00"[0m[0m[0m[2m,[0m
    [0mduration_minutes[2m:[0m [0m[33m120[0m[0m[2m,[0m
    [0mtimezone[2m:[0m [0m[32m[0m[32m"America/Los_Angeles"[0m[0m[0m[2m,[0m
    [0mlocation[2m:[0m [0m[32m[0m[32m"theater"[0m[0m[0m[2m,[0m
    [0mdisplayTime[2m:[0m [0m[32m[0m[32m"20:00 pm"[0m[0m[0m[2m,[0m
  }[0m[2m,[0m {
    [0msummary[2m:[0m [0m[32m[0m[32m"Hiking on October 6, 2025"[0m[0m[0m[2m,[0m
    [0mdate[2m:[0m [0m[32m[0m[32m"2025-10-06"[0m[0m[0m[2m,[0m
    [0mstartTime[2m:[0m [0m[32m[0m[32m"09:00"[0m[0m[0m[2m,[0m
    [0mendTime[2m:[0m [0m[32m[0m[32m"12:00"[0m[0m[0m[2m,[0m
    [0mduration_minutes[2m:[0m [0m[33m180[0m[0m[2m,[0m
    [0mtimezone[2m:[0m [0m[32m[0m[32m"America/Los_Angeles"[0m[0m[0m[2m,[0m
    [0mlocation[2m:[0m [0m[32m[0m[32m"park"[0m[0m[0m[2m,[0m
    [0mdisplayTime[2m:[0m [0m[32m[0m[32m"09:00 am"[0m[0m[0m[2m,[0m
  }[0m[2m,[0m {
    [0msummary[2m:[0m [0m[32m[0m[32m"Dinner on October 7, 2025"[0m[0m[0m[2m,[0m
    [0mdate[2m:[0m [0m[32m[0m[32m"2025-10-07"[0m[0m[0m[2m,[0m
    [0mstartTime[2m:[0m [0m[32m[0m[32m"19:00"[0m[0m[0m[2m,[0m
    [0mendTime[2m:[0m [0m[32m[0m[32m"20:00"[0m[0m[0m[2m,[0m
    [0mduration_minutes[2m:[0m [0m[33m60[0m[0m[2m,[0m
    [0mtimezone[2m:[0m [0m[32m[0m[32m"America/Los_Angeles"[0m[0m[0m[2m,[0m
    [0mlocation[2m:[0m [0m[32m[0m[32m"home"[0m[0m[0m[2m,[0m
    [0mdisplayTime[2m:[0m [0m[32m[0m[32m"19:00 pm"[0m[0m[0m[2m,[0m
  }
]
Regex partial imperfect-refining with LLM
Ready to send Payload:  {
  [0mpartial[2m:[0m [
    {
      [0msummary[2m:[0m [0m[32m[0m[32m"events: Meeting on October 1, 2025"[0m[0m[0m[2m,[0m
      [0mdate[2m:[0m [0m[32m[0m[32m"2025-10-01"[0m[0m[0m[2m,[0m
      [0mstartTime[2m:[0m [0m[32m[0m[32m"10:00"[0m[0m[0m[2m,[0m
      [0mendTime[2m:[0m [0m[32m[0m[32m"11:00"[0m[0m[0m[2m,[0m
      [0mduration_minutes[2m:[0m [0m[33m60[0m[0m[2m,[0m
      [0mtimezone[2m:[0m [0m[32m[0m[32m"America/Los_Angeles"[0m[0m[0m[2m,[0m
      [0mlocation[2m:[0m [0m[32m[0m[32m"office"[0m[0m[0m[2m,[0m
      [0mdisplayTime[2m:[0m [0m[32m[0m[32m"10:00 am"[0m[0m[0m[2m,[0m
    }[0m[2m,[0m {
      [0msummary[2m:[0m [0m[32m[0m[32m"Lunch on October 2, 2025"[0m[0m[0m[2m,[0m
      [0mdate[2m:[0m [0m[32m[0m[32m"2025-10-02"[0m[0m[0m[2m,[0m
      [0mstartTime[2m:[0m [0m[32m[0m[32m"12:00"[0m[0m[0m[2m,[0m
      [0mendTime[2m:[0m [0m[32m[0m[32m"13:00"[0m[0m[0m[2m,[0m
      [0mduration_minutes[2m:[0m [0m[33m60[0m[0m[2m,[0m
      [0mtimezone[2m:[0m [0m[32m[0m[32m"America/Los_Angeles"[0m[0m[0m[2m,[0m
      [0mlocation[2m:[0m [0m[32m[0m[32m"cafe"[0m[0m[0m[2m,[0m
      [0mdisplayTime[2m:[0m [0m[32m[0m[32m"12:00 pm"[0m[0m[0m[2m,[0m
    }[0m[2m,[0m {
      [0msummary[2m:[0m [0m[32m[0m[32m"Call on October 3, 2025"[0m[0m[0m[2m,[0m
      [0mdate[2m:[0m [0m[32m[0m[32m"2025-10-03"[0m[0m[0m[2m,[0m
      [0mstartTime[2m:[0m [0m[32m[0m[32m"14:00"[0m[0m[0m[2m,[0m
      [0mendTime[2m:[0m [0m[32m[0m[32m"15:00"[0m[0m[0m[2m,[0m
      [0mduration_minutes[2m:[0m [0m[33m60[0m[0m[2m,[0m
      [0mtimezone[2m:[0m [0m[32m[0m[32m"America/Los_Angeles"[0m[0m[0m[2m,[0m
      [0mlocation[2m:[0m [0m[33mnull[0m[0m[2m,[0m
      [0mdisplayTime[2m:[0m [0m[32m[0m[32m"14:00 pm"[0m[0m[0m[2m,[0m
    }[0m[2m,[0m {
      [0msummary[2m:[0m [0m[32m[0m[32m"Workout on October 4, 2025"[0m[0m[0m[2m,[0m
      [0mdate[2m:[0m [0m[32m[0m[32m"2025-10-04"[0m[0m[0m[2m,[0m
      [0mstartTime[2m:[0m [0m[32m[0m[32m"06:00"[0m[0m[0m[2m,[0m
      [0mendTime[2m:[0m [0m[32m[0m[32m"07:00"[0m[0m[0m[2m,[0m
      [0mduration_minutes[2m:[0m [0m[33m60[0m[0m[2m,[0m
      [0mtimezone[2m:[0m [0m[32m[0m[32m"America/Los_Angeles"[0m[0m[0m[2m,[0m
      [0mlocation[2m:[0m [0m[32m[0m[32m"gym"[0m[0m[0m[2m,[0m
      [0mdisplayTime[2m:[0m [0m[32m[0m[32m"06:00 am"[0m[0m[0m[2m,[0m
    }[0m[2m,[0m {
      [0msummary[2m:[0m [0m[32m[0m[32m"Movie on October 5, 2025"[0m[0m[0m[2m,[0m
      [0mdate[2m:[0m [0m[32m[0m[32m"2025-10-05"[0m[0m[0m[2m,[0m
      [0mstartTime[2m:[0m [0m[32m[0m[32m"20:00"[0m[0m[0m[2m,[0m
      [0mendTime[2m:[0m [0m[32m[0m[32m"22:00"[0m[0m[0m[2m,[0m
      [0mduration_minutes[2m:[0m [0m[33m120[0m[0m[2m,[0m
      [0mtimezone[2m:[0m [0m[32m[0m[32m"America/Los_Angeles"[0m[0m[0m[2m,[0m
      [0mlocation[2m:[0m [0m[32m[0m[32m"theater"[0m[0m[0m[2m,[0m
      [0mdisplayTime[2m:[0m [0m[32m[0m[32m"20:00 pm"[0m[0m[0m[2m,[0m
    }[0m[2m,[0m {
      [0msummary[2m:[0m [0m[32m[0m[32m"Hiking on October 6, 2025"[0m[0m[0m[2m,[0m
      [0mdate[2m:[0m [0m[32m[0m[32m"2025-10-06"[0m[0m[0m[2m,[0m
      [0mstartTime[2m:[0m [0m[32m[0m[32m"09:00"[0m[0m[0m[2m,[0m
      [0mendTime[2m:[0m [0m[32m[0m[32m"12:00"[0m[0m[0m[2m,[0m
      [0mduration_minutes[2m:[0m [0m[33m180[0m[0m[2m,[0m
      [0mtimezone[2m:[0m [0m[32m[0m[32m"America/Los_Angeles"[0m[0m[0m[2m,[0m
      [0mlocation[2m:[0m [0m[32m[0m[32m"park"[0m[0m[0m[2m,[0m
      [0mdisplayTime[2m:[0m [0m[32m[0m[32m"09:00 am"[0m[0m[0m[2m,[0m
    }[0m[2m,[0m {
      [0msummary[2m:[0m [0m[32m[0m[32m"Dinner on October 7, 2025"[0m[0m[0m[2m,[0m
      [0mdate[2m:[0m [0m[32m[0m[32m"2025-10-07"[0m[0m[0m[2m,[0m
      [0mstartTime[2m:[0m [0m[32m[0m[32m"19:00"[0m[0m[0m[2m,[0m
      [0mendTime[2m:[0m [0m[32m[0m[32m"20:00"[0m[0m[0m[2m,[0m
      [0mduration_minutes[2m:[0m [0m[33m60[0m[0m[2m,[0m
      [0mtimezone[2m:[0m [0m[32m[0m[32m"America/Los_Angeles"[0m[0m[0m[2m,[0m
      [0mlocation[2m:[0m [0m[32m[0m[32m"home"[0m[0m[0m[2m,[0m
      [0mdisplayTime[2m:[0m [0m[32m[0m[32m"19:00 pm"[0m[0m[0m[2m,[0m
    }
  ][0m[2m,[0m
  [0minput[2m:[0m [0m[32m[0m[32m"Add events: Meeting on October 1, 2025 from 10am to 11am at office; Lunch on October 2, 2025 from 12pm to 1pm at cafe; Call on October 3, 2025 from 2pm to 3pm; Workout on October 4, 2025 from 6am to 7am at gym; Movie on October 5, 2025 from 8pm to 10pm at theater; Hiking on October 6, 2025 from 9am to 12pm at park; Dinner on October 7, 2025 from 7pm to 8pm at home"[0m[0m[0m[2m,[0m
  [0mtimezone[2m:[0m [0m[32m[0m[32m"America/Los_Angeles"[0m[0m[0m[2m,[0m
  [0mreference_date[2m:[0m [0m[32m[0m[32m"2025-10-15"[0m[0m[0m[2m,[0m
  [0mparsed_results[2m:[0m [
    {
      [0mtext[2m:[0m [0m[32m[0m[32m"October 1, 2025 from 10am to 11am"[0m[0m[0m[2m,[0m
      [0mstart[2m:[0m [0m[32m[0m[32m"2025-10-01T17:00:00.000Z"[0m[0m[0m[2m,[0m
      [0mend[2m:[0m [0m[32m[0m[32m"2025-10-01T18:00:00.000Z"[0m[0m[0m[2m,[0m
    }[0m[2m,[0m {
      [0mtext[2m:[0m [0m[32m[0m[32m"October 2, 2025 from 12pm to 1pm"[0m[0m[0m[2m,[0m
      [0mstart[2m:[0m [0m[32m[0m[32m"2025-10-02T19:00:00.000Z"[0m[0m[0m[2m,[0m
      [0mend[2m:[0m [0m[32m[0m[32m"2025-10-02T20:00:00.000Z"[0m[0m[0m[2m,[0m
    }[0m[2m,[0m {
      [0mtext[2m:[0m [0m[32m[0m[32m"October 3, 2025 from 2pm to 3pm"[0m[0m[0m[2m,[0m
      [0mstart[2m:[0m [0m[32m[0m[32m"2025-10-03T21:00:00.000Z"[0m[0m[0m[2m,[0m
      [0mend[2m:[0m [0m[32m[0m[32m"2025-10-03T22:00:00.000Z"[0m[0m[0m[2m,[0m
    }[0m[2m,[0m {
      [0mtext[2m:[0m [0m[32m[0m[32m"October 4, 2025 from 6am to 7am"[0m[0m[0m[2m,[0m
      [0mstart[2m:[0m [0m[32m[0m[32m"2025-10-04T13:00:00.000Z"[0m[0m[0m[2m,[0m
      [0mend[2m:[0m [0m[32m[0m[32m"2025-10-04T14:00:00.000Z"[0m[0m[0m[2m,[0m
    }[0m[2m,[0m {
      [0mtext[2m:[0m [0m[32m[0m[32m"October 5, 2025 from 8pm to 10pm"[0m[0m[0m[2m,[0m
      [0mstart[2m:[0m [0m[32m[0m[32m"2025-10-06T03:00:00.000Z"[0m[0m[0m[2m,[0m
      [0mend[2m:[0m [0m[32m[0m[32m"2025-10-06T05:00:00.000Z"[0m[0m[0m[2m,[0m
    }[0m[2m,[0m {
      [0mtext[2m:[0m [0m[32m[0m[32m"October 6, 2025 from 9am to 12pm"[0m[0m[0m[2m,[0m
      [0mstart[2m:[0m [0m[32m[0m[32m"2025-10-06T16:00:00.000Z"[0m[0m[0m[2m,[0m
      [0mend[2m:[0m [0m[32m[0m[32m"2025-10-06T19:00:00.000Z"[0m[0m[0m[2m,[0m
    }[0m[2m,[0m {
      [0mtext[2m:[0m [0m[32m[0m[32m"October 7, 2025 from 7pm to 8pm"[0m[0m[0m[2m,[0m
      [0mstart[2m:[0m [0m[32m[0m[32m"2025-10-08T02:00:00.000Z"[0m[0m[0m[2m,[0m
      [0mend[2m:[0m [0m[32m[0m[32m"2025-10-08T03:00:00.000Z"[0m[0m[0m[2m,[0m
    }
  ][0m[2m,[0m
}
Refined from server:  {
  [0mevents[2m:[0m [
    {
      [0msummary[2m:[0m [0m[32m[0m[32m"events: Meeting on October 1, 2025"[0m[0m[0m[2m,[0m
      [0mdate[2m:[0m [0m[32m[0m[32m"2025-10-01"[0m[0m[0m[2m,[0m
      [0mstartTime[2m:[0m [0m[32m[0m[32m"10:00"[0m[0m[0m[2m,[0m
      [0mendTime[2m:[0m [0m[32m[0m[32m"11:00"[0m[0m[0m[2m,[0m
      [0mduration_minutes[2m:[0m [0m[33m60[0m[0m[2m,[0m
      [0mtimezone[2m:[0m [0m[32m[0m[32m"America/Los_Angeles"[0m[0m[0m[2m,[0m
      [0mlocation[2m:[0m [0m[32m[0m[32m"office"[0m[0m[0m[2m,[0m
      [0mdisplayTime[2m:[0m [0m[32m[0m[32m"10:00 am"[0m[0m[0m[2m,[0m
    }[0m[2m,[0m {
      [0msummary[2m:[0m [0m[32m[0m[32m"Lunch on October 2, 2025"[0m[0m[0m[2m,[0m
      [0mdate[2m:[0m [0m[32m[0m[32m"2025-10-02"[0m[0m[0m[2m,[0m
      [0mstartTime[2m:[0m [0m[32m[0m[32m"12:00"[0m[0m[0m[2m,[0m
      [0mendTime[2m:[0m [0m[32m[0m[32m"13:00"[0m[0m[0m[2m,[0m
      [0mduration_minutes[2m:[0m [0m[33m60[0m[0m[2m,[0m
      [0mtimezone[2m:[0m [0m[32m[0m[32m"America/Los_Angeles"[0m[0m[0m[2m,[0m
      [0mlocation[2m:[0m [0m[32m[0m[32m"cafe"[0m[0m[0m[2m,[0m
      [0mdisplayTime[2m:[0m [0m[32m[0m[32m"12:00 pm"[0m[0m[0m[2m,[0m
    }[0m[2m,[0m {
      [0msummary[2m:[0m [0m[32m[0m[32m"Call on October 3, 2025"[0m[0m[0m[2m,[0m
      [0mdate[2m:[0m [0m[32m[0m[32m"2025-10-03"[0m[0m[0m[2m,[0m
      [0mstartTime[2m:[0m [0m[32m[0m[32m"14:00"[0m[0m[0m[2m,[0m
      [0mendTime[2m:[0m [0m[32m[0m[32m"15:00"[0m[0m[0m[2m,[0m
      [0mduration_minutes[2m:[0m [0m[33m60[0m[0m[2m,[0m
      [0mtimezone[2m:[0m [0m[32m[0m[32m"America/Los_Angeles"[0m[0m[0m[2m,[0m
      [0mlocation[2m:[0m [0m[33mnull[0m[0m[2m,[0m
      [0mdisplayTime[2m:[0m [0m[32m[0m[32m"14:00 pm"[0m[0m[0m[2m,[0m
    }[0m[2m,[0m {
      [0msummary[2m:[0m [0m[32m[0m[32m"Workout on October 4, 2025"[0m[0m[0m[2m,[0m
      [0mdate[2m:[0m [0m[32m[0m[32m"2025-10-04"[0m[0m[0m[2m,[0m
      [0mstartTime[2m:[0m [0m[32m[0m[32m"06:00"[0m[0m[0m[2m,[0m
      [0mendTime[2m:[0m [0m[32m[0m[32m"07:00"[0m[0m[0m[2m,[0m
      [0mduration_minutes[2m:[0m [0m[33m60[0m[0m[2m,[0m
      [0mtimezone[2m:[0m [0m[32m[0m[32m"America/Los_Angeles"[0m[0m[0m[2m,[0m
      [0mlocation[2m:[0m [0m[32m[0m[32m"gym"[0m[0m[0m[2m,[0m
      [0mdisplayTime[2m:[0m [0m[32m[0m[32m"06:00 am"[0m[0m[0m[2m,[0m
    }[0m[2m,[0m {
      [0msummary[2m:[0m [0m[32m[0m[32m"Movie on October 5, 2025"[0m[0m[0m[2m,[0m
      [0mdate[2m:[0m [0m[32m[0m[32m"2025-10-05"[0m[0m[0m[2m,[0m
      [0mstartTime[2m:[0m [0m[32m[0m[32m"20:00"[0m[0m[0m[2m,[0m
      [0mendTime[2m:[0m [0m[32m[0m[32m"22:00"[0m[0m[0m[2m,[0m
      [0mduration_minutes[2m:[0m [0m[33m120[0m[0m[2m,[0m
      [0mtimezone[2m:[0m [0m[32m[0m[32m"America/Los_Angeles"[0m[0m[0m[2m,[0m
      [0mlocation[2m:[0m [0m[32m[0m[32m"theater"[0m[0m[0m[2m,[0m
      [0mdisplayTime[2m:[0m [0m[32m[0m[32m"20:00 pm"[0m[0m[0m[2m,[0m
    }[0m[2m,[0m {
      [0msummary[2m:[0m [0m[32m[0m[32m"Hiking on October 6, 2025"[0m[0m[0m[2m,[0m
      [0mdate[2m:[0m [0m[32m[0m[32m"2025-10-06"[0m[0m[0m[2m,[0m
      [0mstartTime[2m:[0m [0m[32m[0m[32m"09:00"[0m[0m[0m[2m,[0m
      [0mendTime[2m:[0m [0m[32m[0m[32m"12:00"[0m[0m[0m[2m,[0m
      [0mduration_minutes[2m:[0m [0m[33m180[0m[0m[2m,[0m
      [0mtimezone[2m:[0m [0m[32m[0m[32m"America/Los_Angeles"[0m[0m[0m[2m,[0m
      [0mlocation[2m:[0m [0m[32m[0m[32m"park"[0m[0m[0m[2m,[0m
      [0mdisplayTime[2m:[0m [0m[32m[0m[32m"09:00 am"[0m[0m[0m[2m,[0m
    }[0m[2m,[0m {
      [0msummary[2m:[0m [0m[32m[0m[32m"Dinner on October 7, 2025"[0m[0m[0m[2m,[0m
      [0mdate[2m:[0m [0m[32m[0m[32m"2025-10-07"[0m[0m[0m[2m,[0m
      [0mstartTime[2m:[0m [0m[32m[0m[32m"19:00"[0m[0m[0m[2m,[0m
      [0mendTime[2m:[0m [0m[32m[0m[32m"20:00"[0m[0m[0m[2m,[0m
      [0mduration_minutes[2m:[0m [0m[33m60[0m[0m[2m,[0m
      [0mtimezone[2m:[0m [0m[32m[0m[32m"America/Los_Angeles"[0m[0m[0m[2m,[0m
      [0mlocation[2m:[0m [0m[32m[0m[32m"home"[0m[0m[0m[2m,[0m
      [0mdisplayTime[2m:[0m [0m[32m[0m[32m"19:00 pm"[0m[0m[0m[2m,[0m
    }
  ][0m[2m,[0m
  [0mconfirm[2m:[0m [0m[32m[0m[32m"Partial parse-confirm?"[0m[0m[0m[2m,[0m
}
Parsing Completed
Time Completed Parsing:  [0m[33m879.694012[0m
 [0m[1m5 |[0m [0m[35mimport[0m { describe, expect, it, jest } [0m[35mfrom[0m [0m[32m"@jest/globals"[0m[0m[2m;[0m
 [0m[1m6 |[0m [0m[35mimport[0m { fileURLToPath } [0m[35mfrom[0m [0m[32m"url"[0m[0m[2m;[0m
 [0m[1m7 |[0m 
 [0m[1m8 |[0m [0m[35mfunction[0m parseNdjsonResponse(res: [0m[34many[0m): [0m[34many[0m[] {
 [0m[1m9 |[0m   [0m[35mconst[0m chunks: [0m[34many[0m[] = [][0m[2m;[0m
[0m[1m10 |[0m   [0m[35mconst[0m lines = res.text[0m[3m[1m.split[0m([0m[32m"\n"[0m)[0m[3m[1m.filter[0m((line) => line[0m[3m[1m.trim[0m())[0m[2m;[0m
                              [31m[1m^[0m
[0m[31mTypeError[0m[2m:[0m [1mres.text.split is not a function. (In 'res.text.split(`
`)', 'res.text.split' is undefined)[0m
[0m      [2mat [0m[0m[1m[3mparseNdjsonResponse[0m[2m ([0m[0m[36m[2m/home/kyle/Deployments/mcp-server-taskler/[0m[36msrc/tests/api/schedules.test.ts[0m[2m:[0m[33m10[0m[2m:[33m26[0m[2m)[0m
[0m      [2mat [0m[0m[2m<anonymous>[0m[2m ([0m[0m[36m[2m/home/kyle/Deployments/mcp-server-taskler/[0m[36msrc/tests/api/schedules.test.ts[0m[2m:[0m[33m172[0m[2m:[33m20[0m[2m)[0m
[0m[31mâœ—[0m [0mAPI Endpoint : POST /mcp/tools/process-query[2m >[0m[1m should handle multi-days events add query ("add" intent with refinement)[0m [0m[2m[[1m884.20ms[0m[2m][0m
[{"text":"at 10 AM to 11 AM","start":"2025-10-10T17:00:00.000Z","end":"2025-10-10T18:00:00.000Z"},{"text":"at 12 PM to 1 PM","start":"2025-10-10T19:00:00.000Z","end":"2025-10-10T20:00:00.000Z"}]
User Input:  Schedule meeting at 10 AM to 11 AM and lunch at 12 PM to 1 PM tomorrow
classifyIntent is called
events is parsed with regex:  [
  {
    [0msummary[2m:[0m [0m[32m[0m[32m"Schedule meeting"[0m[0m[0m[2m,[0m
    [0mdate[2m:[0m [0m[32m[0m[32m"2025-10-10"[0m[0m[0m[2m,[0m
    [0mstartTime[2m:[0m [0m[32m[0m[32m"10:00"[0m[0m[0m[2m,[0m
    [0mendTime[2m:[0m [0m[32m[0m[32m"11:00"[0m[0m[0m[2m,[0m
    [0mduration_minutes[2m:[0m [0m[33m60[0m[0m[2m,[0m
    [0mtimezone[2m:[0m [0m[32m[0m[32m"America/Los_Angeles"[0m[0m[0m[2m,[0m
    [0mlocation[2m:[0m [0m[32m[0m[32m"10 AM to 11 AM and lunch at 12 PM to 1 PM tomorrow"[0m[0m[0m[2m,[0m
    [0mdisplayTime[2m:[0m [0m[32m[0m[32m"10:00 am"[0m[0m[0m[2m,[0m
  }[0m[2m,[0m {
    [0msummary[2m:[0m [0m[32m[0m[32m"Schedule meeting"[0m[0m[0m[2m,[0m
    [0mdate[2m:[0m [0m[32m[0m[32m"2025-10-10"[0m[0m[0m[2m,[0m
    [0mstartTime[2m:[0m [0m[32m[0m[32m"12:00"[0m[0m[0m[2m,[0m
    [0mendTime[2m:[0m [0m[32m[0m[32m"13:00"[0m[0m[0m[2m,[0m
    [0mduration_minutes[2m:[0m [0m[33m60[0m[0m[2m,[0m
    [0mtimezone[2m:[0m [0m[32m[0m[32m"America/Los_Angeles"[0m[0m[0m[2m,[0m
    [0mlocation[2m:[0m [0m[32m[0m[32m"10 AM to 11 AM and lunch at 12 PM to 1 PM tomorrow"[0m[0m[0m[2m,[0m
    [0mdisplayTime[2m:[0m [0m[32m[0m[32m"12:00 pm"[0m[0m[0m[2m,[0m
  }
]
Regex partial imperfect-refining with LLM
Ready to send Payload:  {
  [0mpartial[2m:[0m [
    {
      [0msummary[2m:[0m [0m[32m[0m[32m"Schedule meeting"[0m[0m[0m[2m,[0m
      [0mdate[2m:[0m [0m[32m[0m[32m"2025-10-10"[0m[0m[0m[2m,[0m
      [0mstartTime[2m:[0m [0m[32m[0m[32m"10:00"[0m[0m[0m[2m,[0m
      [0mendTime[2m:[0m [0m[32m[0m[32m"11:00"[0m[0m[0m[2m,[0m
      [0mduration_minutes[2m:[0m [0m[33m60[0m[0m[2m,[0m
      [0mtimezone[2m:[0m [0m[32m[0m[32m"America/Los_Angeles"[0m[0m[0m[2m,[0m
      [0mlocation[2m:[0m [0m[32m[0m[32m"10 AM to 11 AM and lunch at 12 PM to 1 PM tomorrow"[0m[0m[0m[2m,[0m
      [0mdisplayTime[2m:[0m [0m[32m[0m[32m"10:00 am"[0m[0m[0m[2m,[0m
    }[0m[2m,[0m {
      [0msummary[2m:[0m [0m[32m[0m[32m"Schedule meeting"[0m[0m[0m[2m,[0m
      [0mdate[2m:[0m [0m[32m[0m[32m"2025-10-10"[0m[0m[0m[2m,[0m
      [0mstartTime[2m:[0m [0m[32m[0m[32m"12:00"[0m[0m[0m[2m,[0m
      [0mendTime[2m:[0m [0m[32m[0m[32m"13:00"[0m[0m[0m[2m,[0m
      [0mduration_minutes[2m:[0m [0m[33m60[0m[0m[2m,[0m
      [0mtimezone[2m:[0m [0m[32m[0m[32m"America/Los_Angeles"[0m[0m[0m[2m,[0m
      [0mlocation[2m:[0m [0m[32m[0m[32m"10 AM to 11 AM and lunch at 12 PM to 1 PM tomorrow"[0m[0m[0m[2m,[0m
      [0mdisplayTime[2m:[0m [0m[32m[0m[32m"12:00 pm"[0m[0m[0m[2m,[0m
    }
  ][0m[2m,[0m
  [0minput[2m:[0m [0m[32m[0m[32m"Schedule meeting at 10 AM to 11 AM and lunch at 12 PM to 1 PM tomorrow"[0m[0m[0m[2m,[0m
  [0mtimezone[2m:[0m [0m[32m[0m[32m"America/Los_Angeles"[0m[0m[0m[2m,[0m
  [0mreference_date[2m:[0m [0m[32m[0m[32m"2025-10-15"[0m[0m[0m[2m,[0m
  [0mparsed_results[2m:[0m [
    {
      [0mtext[2m:[0m [0m[32m[0m[32m"at 10 AM to 11 AM"[0m[0m[0m[2m,[0m
      [0mstart[2m:[0m [0m[32m[0m[32m"2025-10-10T17:00:00.000Z"[0m[0m[0m[2m,[0m
      [0mend[2m:[0m [0m[32m[0m[32m"2025-10-10T18:00:00.000Z"[0m[0m[0m[2m,[0m
    }[0m[2m,[0m {
      [0mtext[2m:[0m [0m[32m[0m[32m"at 12 PM to 1 PM"[0m[0m[0m[2m,[0m
      [0mstart[2m:[0m [0m[32m[0m[32m"2025-10-10T19:00:00.000Z"[0m[0m[0m[2m,[0m
      [0mend[2m:[0m [0m[32m[0m[32m"2025-10-10T20:00:00.000Z"[0m[0m[0m[2m,[0m
    }
  ][0m[2m,[0m
}
[0m[31mâœ—[0m [0mAPI Endpoint : POST /mcp/tools/process-query[2m >[0m[1m should handle multi-events in one day add query ("add" intent)[0m [0m[2m[[0m[33m30000.60ms[0m[2m][0m
  [2m^[0m [31mthis test timed out after 30000ms.[0m
[0m
src/tests/api/schedules-bun.test.ts:
[]
User Input:  How are you doing?
classifyIntent is called
[0m[31mâœ—[0m [0mAPI Endpoint : POST /mcp/tools/process-query[2m >[0m[1m should handle chit-chat query ("other" intent)[0m [0m[2m[[0m[33m30000.56ms[0m[2m][0m
  [2m^[0m [31mthis test timed out after 30000ms.[0m
[]
User Input:  What is 2 + 3 * 4?
classifyIntent is called
[0m[31mâœ—[0m [0mAPI Endpoint : POST /mcp/tools/process-query[2m >[0m[1m should handle computational-math query ("other" intent)[0m [0m[2m[[0m[33m30000.53ms[0m[2m][0m
  [2m^[0m [31mthis test timed out after 30000ms.[0m
[{"text":"tomorrow at 10 AM","start":"2025-10-10T17:00:00.000Z","end":null}]
User Input:  Schedule a meeting tomorrow at 10 AM in PDT
classifyIntent is called
events is parsed with regex:  [
  {
    [0msummary[2m:[0m [0m[32m[0m[32m"Event"[0m[0m[0m[2m,[0m
    [0mdate[2m:[0m [0m[32m[0m[32m"2025-10-10"[0m[0m[0m[2m,[0m
    [0mstartTime[2m:[0m [0m[32m[0m[32m"10:00"[0m[0m[0m[2m,[0m
    [0mendTime[2m:[0m [0m[2mundefined[0m[0m[2m,[0m
    [0mduration_minutes[2m:[0m [0m[33m60[0m[0m[2m,[0m
    [0mtimezone[2m:[0m [0m[32m[0m[32m"America/Los_Angeles"[0m[0m[0m[2m,[0m
    [0mlocation[2m:[0m [0m[32m[0m[32m"10 AM in PDT"[0m[0m[0m[2m,[0m
    [0mdisplayTime[2m:[0m [0m[32m[0m[32m"10:00 am"[0m[0m[0m[2m,[0m
  }
]
Regex partial imperfect-refining with LLM
Ready to send Payload:  {
  [0mpartial[2m:[0m {
    [0mevents[2m:[0m [
      [0m[36m[Object ...][0m
    ][0m[2m,[0m
    [0mconfirm[2m:[0m [0m[32m[0m[32m"Missing end time. Confirm default 60 minutes?"[0m[0m[0m[2m,[0m
  }[0m[2m,[0m
  [0minput[2m:[0m [0m[32m[0m[32m"Schedule a meeting tomorrow at 10 AM in PDT"[0m[0m[0m[2m,[0m
  [0mtimezone[2m:[0m [0m[32m[0m[32m"America/Los_Angeles"[0m[0m[0m[2m,[0m
  [0mreference_date[2m:[0m [0m[32m[0m[32m"2025-10-15"[0m[0m[0m[2m,[0m
  [0mparsed_results[2m:[0m [
    {
      [0mtext[2m:[0m [0m[32m[0m[32m"tomorrow at 10 AM"[0m[0m[0m[2m,[0m
      [0mstart[2m:[0m [0m[32m[0m[32m"2025-10-10T17:00:00.000Z"[0m[0m[0m[2m,[0m
      [0mend[2m:[0m [0m[33mnull[0m[0m[2m,[0m
    }
  ][0m[2m,[0m
}
[0m[31mâœ—[0m [0mAPI Endpoint : POST /mcp/tools/process-query[2m >[0m[1m should handle single event add query ("add" intent)[0m [0m[2m[[0m[33m30000.51ms[0m[2m][0m
  [2m^[0m [31mthis test timed out after 30000ms.[0m
[{"text":"October 1, 2025 from 10am to 11am","start":"2025-10-01T17:00:00.000Z","end":"2025-10-01T18:00:00.000Z"},{"text":"October 2, 2025 from 12pm to 1pm","start":"2025-10-02T19:00:00.000Z","end":"2025-10-02T20:00:00.000Z"},{"text":"October 3, 2025 from 2pm to 3pm","start":"2025-10-03T21:00:00.000Z","end":"2025-10-03T22:00:00.000Z"},{"text":"October 4, 2025 from 6am to 7am","start":"2025-10-04T13:00:00.000Z","end":"2025-10-04T14:00:00.000Z"},{"text":"October 5, 2025 from 8pm to 10pm","start":"2025-10-06T03:00:00.000Z","end":"2025-10-06T05:00:00.000Z"},{"text":"October 6, 2025 from 9am to 12pm","start":"2025-10-06T16:00:00.000Z","end":"2025-10-06T19:00:00.000Z"},{"text":"October 7, 2025 from 7pm to 8pm","start":"2025-10-08T02:00:00.000Z","end":"2025-10-08T03:00:00.000Z"}]
User Input:  Add events: Meeting on October 1, 2025 from 10am to 11am at office; Lunch on October 2, 2025 from 12pm to 1pm at cafe; Call on October 3, 2025 from 2pm to 3pm; Workout on October 4, 2025 from 6am to 7am at gym; Movie on October 5, 2025 from 8pm to 10pm at theater; Hiking on October 6, 2025 from 9am to 12pm at park; Dinner on October 7, 2025 from 7pm to 8pm at home
classifyIntent is called
events is parsed with regex:  [
  {
    [0msummary[2m:[0m [0m[32m[0m[32m"events: Meeting on October 1, 2025"[0m[0m[0m[2m,[0m
    [0mdate[2m:[0m [0m[32m[0m[32m"2025-10-01"[0m[0m[0m[2m,[0m
    [0mstartTime[2m:[0m [0m[32m[0m[32m"10:00"[0m[0m[0m[2m,[0m
    [0mendTime[2m:[0m [0m[32m[0m[32m"11:00"[0m[0m[0m[2m,[0m
    [0mduration_minutes[2m:[0m [0m[33m60[0m[0m[2m,[0m
    [0mtimezone[2m:[0m [0m[32m[0m[32m"America/Los_Angeles"[0m[0m[0m[2m,[0m
    [0mlocation[2m:[0m [0m[32m[0m[32m"office"[0m[0m[0m[2m,[0m
    [0mdisplayTime[2m:[0m [0m[32m[0m[32m"10:00 am"[0m[0m[0m[2m,[0m
  }[0m[2m,[0m {
    [0msummary[2m:[0m [0m[32m[0m[32m"Lunch on October 2, 2025"[0m[0m[0m[2m,[0m
    [0mdate[2m:[0m [0m[32m[0m[32m"2025-10-02"[0m[0m[0m[2m,[0m
    [0mstartTime[2m:[0m [0m[32m[0m[32m"12:00"[0m[0m[0m[2m,[0m
    [0mendTime[2m:[0m [0m[32m[0m[32m"13:00"[0m[0m[0m[2m,[0m
    [0mduration_minutes[2m:[0m [0m[33m60[0m[0m[2m,[0m
    [0mtimezone[2m:[0m [0m[32m[0m[32m"America/Los_Angeles"[0m[0m[0m[2m,[0m
    [0mlocation[2m:[0m [0m[32m[0m[32m"cafe"[0m[0m[0m[2m,[0m
    [0mdisplayTime[2m:[0m [0m[32m[0m[32m"12:00 pm"[0m[0m[0m[2m,[0m
  }[0m[2m,[0m {
    [0msummary[2m:[0m [0m[32m[0m[32m"Call on October 3, 2025"[0m[0m[0m[2m,[0m
    [0mdate[2m:[0m [0m[32m[0m[32m"2025-10-03"[0m[0m[0m[2m,[0m
    [0mstartTime[2m:[0m [0m[32m[0m[32m"14:00"[0m[0m[0m[2m,[0m
    [0mendTime[2m:[0m [0m[32m[0m[32m"15:00"[0m[0m[0m[2m,[0m
    [0mduration_minutes[2m:[0m [0m[33m60[0m[0m[2m,[0m
    [0mtimezone[2m:[0m [0m[32m[0m[32m"America/Los_Angeles"[0m[0m[0m[2m,[0m
    [0mlocation[2m:[0m [0m[33mnull[0m[0m[2m,[0m
    [0mdisplayTime[2m:[0m [0m[32m[0m[32m"14:00 pm"[0m[0m[0m[2m,[0m
  }[0m[2m,[0m {
    [0msummary[2m:[0m [0m[32m[0m[32m"Workout on October 4, 2025"[0m[0m[0m[2m,[0m
    [0mdate[2m:[0m [0m[32m[0m[32m"2025-10-04"[0m[0m[0m[2m,[0m
    [0mstartTime[2m:[0m [0m[32m[0m[32m"06:00"[0m[0m[0m[2m,[0m
    [0mendTime[2m:[0m [0m[32m[0m[32m"07:00"[0m[0m[0m[2m,[0m
    [0mduration_minutes[2m:[0m [0m[33m60[0m[0m[2m,[0m
    [0mtimezone[2m:[0m [0m[32m[0m[32m"America/Los_Angeles"[0m[0m[0m[2m,[0m
    [0mlocation[2m:[0m [0m[32m[0m[32m"gym"[0m[0m[0m[2m,[0m
    [0mdisplayTime[2m:[0m [0m[32m[0m[32m"06:00 am"[0m[0m[0m[2m,[0m
  }[0m[2m,[0m {
    [0msummary[2m:[0m [0m[32m[0m[32m"Movie on October 5, 2025"[0m[0m[0m[2m,[0m
    [0mdate[2m:[0m [0m[32m[0m[32m"2025-10-05"[0m[0m[0m[2m,[0m
    [0mstartTime[2m:[0m [0m[32m[0m[32m"20:00"[0m[0m[0m[2m,[0m
    [0mendTime[2m:[0m [0m[32m[0m[32m"22:00"[0m[0m[0m[2m,[0m
    [0mduration_minutes[2m:[0m [0m[33m120[0m[0m[2m,[0m
    [0mtimezone[2m:[0m [0m[32m[0m[32m"America/Los_Angeles"[0m[0m[0m[2m,[0m
    [0mlocation[2m:[0m [0m[32m[0m[32m"theater"[0m[0m[0m[2m,[0m
    [0mdisplayTime[2m:[0m [0m[32m[0m[32m"20:00 pm"[0m[0m[0m[2m,[0m
  }[0m[2m,[0m {
    [0msummary[2m:[0m [0m[32m[0m[32m"Hiking on October 6, 2025"[0m[0m[0m[2m,[0m
    [0mdate[2m:[0m [0m[32m[0m[32m"2025-10-06"[0m[0m[0m[2m,[0m
    [0mstartTime[2m:[0m [0m[32m[0m[32m"09:00"[0m[0m[0m[2m,[0m
    [0mendTime[2m:[0m [0m[32m[0m[32m"12:00"[0m[0m[0m[2m,[0m
    [0mduration_minutes[2m:[0m [0m[33m180[0m[0m[2m,[0m
    [0mtimezone[2m:[0m [0m[32m[0m[32m"America/Los_Angeles"[0m[0m[0m[2m,[0m
    [0mlocation[2m:[0m [0m[32m[0m[32m"park"[0m[0m[0m[2m,[0m
    [0mdisplayTime[2m:[0m [0m[32m[0m[32m"09:00 am"[0m[0m[0m[2m,[0m
  }[0m[2m,[0m {
    [0msummary[2m:[0m [0m[32m[0m[32m"Dinner on October 7, 2025"[0m[0m[0m[2m,[0m
    [0mdate[2m:[0m [0m[32m[0m[32m"2025-10-07"[0m[0m[0m[2m,[0m
    [0mstartTime[2m:[0m [0m[32m[0m[32m"19:00"[0m[0m[0m[2m,[0m
    [0mendTime[2m:[0m [0m[32m[0m[32m"20:00"[0m[0m[0m[2m,[0m
    [0mduration_minutes[2m:[0m [0m[33m60[0m[0m[2m,[0m
    [0mtimezone[2m:[0m [0m[32m[0m[32m"America/Los_Angeles"[0m[0m[0m[2m,[0m
    [0mlocation[2m:[0m [0m[32m[0m[32m"home"[0m[0m[0m[2m,[0m
    [0mdisplayTime[2m:[0m [0m[32m[0m[32m"19:00 pm"[0m[0m[0m[2m,[0m
  }
]
Regex partial imperfect-refining with LLM
Ready to send Payload:  {
  [0mpartial[2m:[0m [
    {
      [0msummary[2m:[0m [0m[32m[0m[32m"events: Meeting on October 1, 2025"[0m[0m[0m[2m,[0m
      [0mdate[2m:[0m [0m[32m[0m[32m"2025-10-01"[0m[0m[0m[2m,[0m
      [0mstartTime[2m:[0m [0m[32m[0m[32m"10:00"[0m[0m[0m[2m,[0m
      [0mendTime[2m:[0m [0m[32m[0m[32m"11:00"[0m[0m[0m[2m,[0m
      [0mduration_minutes[2m:[0m [0m[33m60[0m[0m[2m,[0m
      [0mtimezone[2m:[0m [0m[32m[0m[32m"America/Los_Angeles"[0m[0m[0m[2m,[0m
      [0mlocation[2m:[0m [0m[32m[0m[32m"office"[0m[0m[0m[2m,[0m
      [0mdisplayTime[2m:[0m [0m[32m[0m[32m"10:00 am"[0m[0m[0m[2m,[0m
    }[0m[2m,[0m {
      [0msummary[2m:[0m [0m[32m[0m[32m"Lunch on October 2, 2025"[0m[0m[0m[2m,[0m
      [0mdate[2m:[0m [0m[32m[0m[32m"2025-10-02"[0m[0m[0m[2m,[0m
      [0mstartTime[2m:[0m [0m[32m[0m[32m"12:00"[0m[0m[0m[2m,[0m
      [0mendTime[2m:[0m [0m[32m[0m[32m"13:00"[0m[0m[0m[2m,[0m
      [0mduration_minutes[2m:[0m [0m[33m60[0m[0m[2m,[0m
      [0mtimezone[2m:[0m [0m[32m[0m[32m"America/Los_Angeles"[0m[0m[0m[2m,[0m
      [0mlocation[2m:[0m [0m[32m[0m[32m"cafe"[0m[0m[0m[2m,[0m
      [0mdisplayTime[2m:[0m [0m[32m[0m[32m"12:00 pm"[0m[0m[0m[2m,[0m
    }[0m[2m,[0m {
      [0msummary[2m:[0m [0m[32m[0m[32m"Call on October 3, 2025"[0m[0m[0m[2m,[0m
      [0mdate[2m:[0m [0m[32m[0m[32m"2025-10-03"[0m[0m[0m[2m,[0m
      [0mstartTime[2m:[0m [0m[32m[0m[32m"14:00"[0m[0m[0m[2m,[0m
      [0mendTime[2m:[0m [0m[32m[0m[32m"15:00"[0m[0m[0m[2m,[0m
      [0mduration_minutes[2m:[0m [0m[33m60[0m[0m[2m,[0m
      [0mtimezone[2m:[0m [0m[32m[0m[32m"America/Los_Angeles"[0m[0m[0m[2m,[0m
      [0mlocation[2m:[0m [0m[33mnull[0m[0m[2m,[0m
      [0mdisplayTime[2m:[0m [0m[32m[0m[32m"14:00 pm"[0m[0m[0m[2m,[0m
    }[0m[2m,[0m {
      [0msummary[2m:[0m [0m[32m[0m[32m"Workout on October 4, 2025"[0m[0m[0m[2m,[0m
      [0mdate[2m:[0m [0m[32m[0m[32m"2025-10-04"[0m[0m[0m[2m,[0m
      [0mstartTime[2m:[0m [0m[32m[0m[32m"06:00"[0m[0m[0m[2m,[0m
      [0mendTime[2m:[0m [0m[32m[0m[32m"07:00"[0m[0m[0m[2m,[0m
      [0mduration_minutes[2m:[0m [0m[33m60[0m[0m[2m,[0m
      [0mtimezone[2m:[0m [0m[32m[0m[32m"America/Los_Angeles"[0m[0m[0m[2m,[0m
      [0mlocation[2m:[0m [0m[32m[0m[32m"gym"[0m[0m[0m[2m,[0m
      [0mdisplayTime[2m:[0m [0m[32m[0m[32m"06:00 am"[0m[0m[0m[2m,[0m
    }[0m[2m,[0m {
      [0msummary[2m:[0m [0m[32m[0m[32m"Movie on October 5, 2025"[0m[0m[0m[2m,[0m
      [0mdate[2m:[0m [0m[32m[0m[32m"2025-10-05"[0m[0m[0m[2m,[0m
      [0mstartTime[2m:[0m [0m[32m[0m[32m"20:00"[0m[0m[0m[2m,[0m
      [0mendTime[2m:[0m [0m[32m[0m[32m"22:00"[0m[0m[0m[2m,[0m
      [0mduration_minutes[2m:[0m [0m[33m120[0m[0m[2m,[0m
      [0mtimezone[2m:[0m [0m[32m[0m[32m"America/Los_Angeles"[0m[0m[0m[2m,[0m
      [0mlocation[2m:[0m [0m[32m[0m[32m"theater"[0m[0m[0m[2m,[0m
      [0mdisplayTime[2m:[0m [0m[32m[0m[32m"20:00 pm"[0m[0m[0m[2m,[0m
    }[0m[2m,[0m {
      [0msummary[2m:[0m [0m[32m[0m[32m"Hiking on October 6, 2025"[0m[0m[0m[2m,[0m
      [0mdate[2m:[0m [0m[32m[0m[32m"2025-10-06"[0m[0m[0m[2m,[0m
      [0mstartTime[2m:[0m [0m[32m[0m[32m"09:00"[0m[0m[0m[2m,[0m
      [0mendTime[2m:[0m [0m[32m[0m[32m"12:00"[0m[0m[0m[2m,[0m
      [0mduration_minutes[2m:[0m [0m[33m180[0m[0m[2m,[0m
      [0mtimezone[2m:[0m [0m[32m[0m[32m"America/Los_Angeles"[0m[0m[0m[2m,[0m
      [0mlocation[2m:[0m [0m[32m[0m[32m"park"[0m[0m[0m[2m,[0m
      [0mdisplayTime[2m:[0m [0m[32m[0m[32m"09:00 am"[0m[0m[0m[2m,[0m
    }[0m[2m,[0m {
      [0msummary[2m:[0m [0m[32m[0m[32m"Dinner on October 7, 2025"[0m[0m[0m[2m,[0m
      [0mdate[2m:[0m [0m[32m[0m[32m"2025-10-07"[0m[0m[0m[2m,[0m
      [0mstartTime[2m:[0m [0m[32m[0m[32m"19:00"[0m[0m[0m[2m,[0m
      [0mendTime[2m:[0m [0m[32m[0m[32m"20:00"[0m[0m[0m[2m,[0m
      [0mduration_minutes[2m:[0m [0m[33m60[0m[0m[2m,[0m
      [0mtimezone[2m:[0m [0m[32m[0m[32m"America/Los_Angeles"[0m[0m[0m[2m,[0m
      [0mlocation[2m:[0m [0m[32m[0m[32m"home"[0m[0m[0m[2m,[0m
      [0mdisplayTime[2m:[0m [0m[32m[0m[32m"19:00 pm"[0m[0m[0m[2m,[0m
    }
  ][0m[2m,[0m
  [0minput[2m:[0m [0m[32m[0m[32m"Add events: Meeting on October 1, 2025 from 10am to 11am at office; Lunch on October 2, 2025 from 12pm to 1pm at cafe; Call on October 3, 2025 from 2pm to 3pm; Workout on October 4, 2025 from 6am to 7am at gym; Movie on October 5, 2025 from 8pm to 10pm at theater; Hiking on October 6, 2025 from 9am to 12pm at park; Dinner on October 7, 2025 from 7pm to 8pm at home"[0m[0m[0m[2m,[0m
  [0mtimezone[2m:[0m [0m[32m[0m[32m"America/Los_Angeles"[0m[0m[0m[2m,[0m
  [0mreference_date[2m:[0m [0m[32m[0m[32m"2025-10-15"[0m[0m[0m[2m,[0m
  [0mparsed_results[2m:[0m [
    {
      [0mtext[2m:[0m [0m[32m[0m[32m"October 1, 2025 from 10am to 11am"[0m[0m[0m[2m,[0m
      [0mstart[2m:[0m [0m[32m[0m[32m"2025-10-01T17:00:00.000Z"[0m[0m[0m[2m,[0m
      [0mend[2m:[0m [0m[32m[0m[32m"2025-10-01T18:00:00.000Z"[0m[0m[0m[2m,[0m
    }[0m[2m,[0m {
      [0mtext[2m:[0m [0m[32m[0m[32m"October 2, 2025 from 12pm to 1pm"[0m[0m[0m[2m,[0m
      [0mstart[2m:[0m [0m[32m[0m[32m"2025-10-02T19:00:00.000Z"[0m[0m[0m[2m,[0m
      [0mend[2m:[0m [0m[32m[0m[32m"2025-10-02T20:00:00.000Z"[0m[0m[0m[2m,[0m
    }[0m[2m,[0m {
      [0mtext[2m:[0m [0m[32m[0m[32m"October 3, 2025 from 2pm to 3pm"[0m[0m[0m[2m,[0m
      [0mstart[2m:[0m [0m[32m[0m[32m"2025-10-03T21:00:00.000Z"[0m[0m[0m[2m,[0m
      [0mend[2m:[0m [0m[32m[0m[32m"2025-10-03T22:00:00.000Z"[0m[0m[0m[2m,[0m
    }[0m[2m,[0m {
      [0mtext[2m:[0m [0m[32m[0m[32m"October 4, 2025 from 6am to 7am"[0m[0m[0m[2m,[0m
      [0mstart[2m:[0m [0m[32m[0m[32m"2025-10-04T13:00:00.000Z"[0m[0m[0m[2m,[0m
      [0mend[2m:[0m [0m[32m[0m[32m"2025-10-04T14:00:00.000Z"[0m[0m[0m[2m,[0m
    }[0m[2m,[0m {
      [0mtext[2m:[0m [0m[32m[0m[32m"October 5, 2025 from 8pm to 10pm"[0m[0m[0m[2m,[0m
      [0mstart[2m:[0m [0m[32m[0m[32m"2025-10-06T03:00:00.000Z"[0m[0m[0m[2m,[0m
      [0mend[2m:[0m [0m[32m[0m[32m"2025-10-06T05:00:00.000Z"[0m[0m[0m[2m,[0m
    }[0m[2m,[0m {
      [0mtext[2m:[0m [0m[32m[0m[32m"October 6, 2025 from 9am to 12pm"[0m[0m[0m[2m,[0m
      [0mstart[2m:[0m [0m[32m[0m[32m"2025-10-06T16:00:00.000Z"[0m[0m[0m[2m,[0m
      [0mend[2m:[0m [0m[32m[0m[32m"2025-10-06T19:00:00.000Z"[0m[0m[0m[2m,[0m
    }[0m[2m,[0m {
      [0mtext[2m:[0m [0m[32m[0m[32m"October 7, 2025 from 7pm to 8pm"[0m[0m[0m[2m,[0m
      [0mstart[2m:[0m [0m[32m[0m[32m"2025-10-08T02:00:00.000Z"[0m[0m[0m[2m,[0m
      [0mend[2m:[0m [0m[32m[0m[32m"2025-10-08T03:00:00.000Z"[0m[0m[0m[2m,[0m
    }
  ][0m[2m,[0m
}
[0m[31mâœ—[0m [0mAPI Endpoint : POST /mcp/tools/process-query[2m >[0m[1m should handle multi-days events add query ("add" intent with refinement)[0m [0m[2m[[0m[33m30000.47ms[0m[2m][0m
  [2m^[0m [31mthis test timed out after 30000ms.[0m
[{"text":"at 10 AM to 11 AM","start":"2025-10-10T17:00:00.000Z","end":"2025-10-10T18:00:00.000Z"},{"text":"at 12 PM to 1 PM","start":"2025-10-10T19:00:00.000Z","end":"2025-10-10T20:00:00.000Z"}]
User Input:  Schedule meeting at 10 AM to 11 AM and lunch at 12 PM to 1 PM tomorrow
classifyIntent is called
events is parsed with regex:  [
  {
    [0msummary[2m:[0m [0m[32m[0m[32m"Schedule meeting"[0m[0m[0m[2m,[0m
    [0mdate[2m:[0m [0m[32m[0m[32m"2025-10-10"[0m[0m[0m[2m,[0m
    [0mstartTime[2m:[0m [0m[32m[0m[32m"10:00"[0m[0m[0m[2m,[0m
    [0mendTime[2m:[0m [0m[32m[0m[32m"11:00"[0m[0m[0m[2m,[0m
    [0mduration_minutes[2m:[0m [0m[33m60[0m[0m[2m,[0m
    [0mtimezone[2m:[0m [0m[32m[0m[32m"America/Los_Angeles"[0m[0m[0m[2m,[0m
    [0mlocation[2m:[0m [0m[32m[0m[32m"10 AM to 11 AM and lunch at 12 PM to 1 PM tomorrow"[0m[0m[0m[2m,[0m
    [0mdisplayTime[2m:[0m [0m[32m[0m[32m"10:00 am"[0m[0m[0m[2m,[0m
  }[0m[2m,[0m {
    [0msummary[2m:[0m [0m[32m[0m[32m"Schedule meeting"[0m[0m[0m[2m,[0m
    [0mdate[2m:[0m [0m[32m[0m[32m"2025-10-10"[0m[0m[0m[2m,[0m
    [0mstartTime[2m:[0m [0m[32m[0m[32m"12:00"[0m[0m[0m[2m,[0m
    [0mendTime[2m:[0m [0m[32m[0m[32m"13:00"[0m[0m[0m[2m,[0m
    [0mduration_minutes[2m:[0m [0m[33m60[0m[0m[2m,[0m
    [0mtimezone[2m:[0m [0m[32m[0m[32m"America/Los_Angeles"[0m[0m[0m[2m,[0m
    [0mlocation[2m:[0m [0m[32m[0m[32m"10 AM to 11 AM and lunch at 12 PM to 1 PM tomorrow"[0m[0m[0m[2m,[0m
    [0mdisplayTime[2m:[0m [0m[32m[0m[32m"12:00 pm"[0m[0m[0m[2m,[0m
  }
]
Regex partial imperfect-refining with LLM
Ready to send Payload:  {
  [0mpartial[2m:[0m [
    {
      [0msummary[2m:[0m [0m[32m[0m[32m"Schedule meeting"[0m[0m[0m[2m,[0m
      [0mdate[2m:[0m [0m[32m[0m[32m"2025-10-10"[0m[0m[0m[2m,[0m
      [0mstartTime[2m:[0m [0m[32m[0m[32m"10:00"[0m[0m[0m[2m,[0m
      [0mendTime[2m:[0m [0m[32m[0m[32m"11:00"[0m[0m[0m[2m,[0m
      [0mduration_minutes[2m:[0m [0m[33m60[0m[0m[2m,[0m
      [0mtimezone[2m:[0m [0m[32m[0m[32m"America/Los_Angeles"[0m[0m[0m[2m,[0m
      [0mlocation[2m:[0m [0m[32m[0m[32m"10 AM to 11 AM and lunch at 12 PM to 1 PM tomorrow"[0m[0m[0m[2m,[0m
      [0mdisplayTime[2m:[0m [0m[32m[0m[32m"10:00 am"[0m[0m[0m[2m,[0m
    }[0m[2m,[0m {
      [0msummary[2m:[0m [0m[32m[0m[32m"Schedule meeting"[0m[0m[0m[2m,[0m
      [0mdate[2m:[0m [0m[32m[0m[32m"2025-10-10"[0m[0m[0m[2m,[0m
      [0mstartTime[2m:[0m [0m[32m[0m[32m"12:00"[0m[0m[0m[2m,[0m
      [0mendTime[2m:[0m [0m[32m[0m[32m"13:00"[0m[0m[0m[2m,[0m
      [0mduration_minutes[2m:[0m [0m[33m60[0m[0m[2m,[0m
      [0mtimezone[2m:[0m [0m[32m[0m[32m"America/Los_Angeles"[0m[0m[0m[2m,[0m
      [0mlocation[2m:[0m [0m[32m[0m[32m"10 AM to 11 AM and lunch at 12 PM to 1 PM tomorrow"[0m[0m[0m[2m,[0m
      [0mdisplayTime[2m:[0m [0m[32m[0m[32m"12:00 pm"[0m[0m[0m[2m,[0m
    }
  ][0m[2m,[0m
  [0minput[2m:[0m [0m[32m[0m[32m"Schedule meeting at 10 AM to 11 AM and lunch at 12 PM to 1 PM tomorrow"[0m[0m[0m[2m,[0m
  [0mtimezone[2m:[0m [0m[32m[0m[32m"America/Los_Angeles"[0m[0m[0m[2m,[0m
  [0mreference_date[2m:[0m [0m[32m[0m[32m"2025-10-15"[0m[0m[0m[2m,[0m
  [0mparsed_results[2m:[0m [
    {
      [0mtext[2m:[0m [0m[32m[0m[32m"at 10 AM to 11 AM"[0m[0m[0m[2m,[0m
      [0mstart[2m:[0m [0m[32m[0m[32m"2025-10-10T17:00:00.000Z"[0m[0m[0m[2m,[0m
      [0mend[2m:[0m [0m[32m[0m[32m"2025-10-10T18:00:00.000Z"[0m[0m[0m[2m,[0m
    }[0m[2m,[0m {
      [0mtext[2m:[0m [0m[32m[0m[32m"at 12 PM to 1 PM"[0m[0m[0m[2m,[0m
      [0mstart[2m:[0m [0m[32m[0m[32m"2025-10-10T19:00:00.000Z"[0m[0m[0m[2m,[0m
      [0mend[2m:[0m [0m[32m[0m[32m"2025-10-10T20:00:00.000Z"[0m[0m[0m[2m,[0m
    }
  ][0m[2m,[0m
}
[0m[31mâœ—[0m [0mAPI Endpoint : POST /mcp/tools/process-query[2m >[0m[1m should handle multi-events in one day add query ("add" intent)[0m [0m[2m[[0m[33m30000.24ms[0m[2m][0m
  [2m^[0m [31mthis test timed out after 30000ms.[0m
[0m
dist/tests/api/schedules.test.js:
[dotenv@17.2.3] injecting env (0) from .env [2m-- tip: âš™ï¸  load multiple .env files with { path: ['.env.local', '.env'] }[0m
Loaded MODEL_PARSE: /home/kyle/.models/mistral-7b-instruct-v0.1.Q4_K_M.gguf
[]
User Input:  How are you doing?
classifyIntent is called
[0m[31mâœ—[0m [0mAPI Endpoint : POST /mcp/tools/process-query[2m >[0m[1m should handle chit-chat query ("other" intent)[0m [0m[2m[[0m[33m30000.41ms[0m[2m][0m
  [2m^[0m [31mthis test timed out after 30000ms.[0m
[]
User Input:  What is 2 + 3 * 4?
classifyIntent is called
[0m[31mâœ—[0m [0mAPI Endpoint : POST /mcp/tools/process-query[2m >[0m[1m should handle computational-math query ("other" intent)[0m [0m[2m[[0m[33m30000.06ms[0m[2m][0m
  [2m^[0m [31mthis test timed out after 30000ms.[0m
[{"text":"tomorrow at 10 AM","start":"2025-10-10T17:00:00.000Z","end":null}]
User Input:  Schedule a meeting tomorrow at 10 AM in PDT
classifyIntent is called
events is parsed with regex:  [
  {
    [0msummary[2m:[0m [0m[32m[0m[32m"Event"[0m[0m[0m[2m,[0m
    [0mdate[2m:[0m [0m[32m[0m[32m"2025-10-10"[0m[0m[0m[2m,[0m
    [0mstartTime[2m:[0m [0m[32m[0m[32m"10:00"[0m[0m[0m[2m,[0m
    [0mendTime[2m:[0m [0m[2mundefined[0m[0m[2m,[0m
    [0mduration_minutes[2m:[0m [0m[33m60[0m[0m[2m,[0m
    [0mtimezone[2m:[0m [0m[32m[0m[32m"America/Los_Angeles"[0m[0m[0m[2m,[0m
    [0mlocation[2m:[0m [0m[32m[0m[32m"10 AM in PDT"[0m[0m[0m[2m,[0m
    [0mdisplayTime[2m:[0m [0m[32m[0m[32m"10:00 am"[0m[0m[0m[2m,[0m
  }
]
Regex partial imperfect-refining with LLM
Ready to send Payload:  {
  [0mpartial[2m:[0m {
    [0mevents[2m:[0m [
      [0m[36m[Object ...][0m
    ][0m[2m,[0m
    [0mconfirm[2m:[0m [0m[32m[0m[32m"Missing end time. Confirm default 60 minutes?"[0m[0m[0m[2m,[0m
  }[0m[2m,[0m
  [0minput[2m:[0m [0m[32m[0m[32m"Schedule a meeting tomorrow at 10 AM in PDT"[0m[0m[0m[2m,[0m
  [0mtimezone[2m:[0m [0m[32m[0m[32m"America/Los_Angeles"[0m[0m[0m[2m,[0m
  [0mreference_date[2m:[0m [0m[32m[0m[32m"2025-10-15"[0m[0m[0m[2m,[0m
  [0mparsed_results[2m:[0m [
    {
      [0mtext[2m:[0m [0m[32m[0m[32m"tomorrow at 10 AM"[0m[0m[0m[2m,[0m
      [0mstart[2m:[0m [0m[32m[0m[32m"2025-10-10T17:00:00.000Z"[0m[0m[0m[2m,[0m
      [0mend[2m:[0m [0m[33mnull[0m[0m[2m,[0m
    }
  ][0m[2m,[0m
}
[0m[31mDetailed LLM setup error: DOMException {
  [0mstack[2m:[0m [0m[32m""[0m[0m[2m,[0m
  [0mcode[2m:[0m [0m[33m23[0m[0m[2m,[0m
  [0mname[2m:[0m [0m[32m[0m[32m"TimeoutError"[0m[0m[0m[2m,[0m
  [0mmessage[2m:[0m [0m[32m[0m[32m"The operation timed out."[0m[0m[0m[2m,[0m
  [0mINDEX_SIZE_ERR[2m:[0m [0m[33m1[0m[0m[2m,[0m
  [0mDOMSTRING_SIZE_ERR[2m:[0m [0m[33m2[0m[0m[2m,[0m
  [0mHIERARCHY_REQUEST_ERR[2m:[0m [0m[33m3[0m[0m[2m,[0m
  [0mWRONG_DOCUMENT_ERR[2m:[0m [0m[33m4[0m[0m[2m,[0m
  [0mINVALID_CHARACTER_ERR[2m:[0m [0m[33m5[0m[0m[2m,[0m
  [0mNO_DATA_ALLOWED_ERR[2m:[0m [0m[33m6[0m[0m[2m,[0m
  [0mNO_MODIFICATION_ALLOWED_ERR[2m:[0m [0m[33m7[0m[0m[2m,[0m
  [0mNOT_FOUND_ERR[2m:[0m [0m[33m8[0m[0m[2m,[0m
  [0mNOT_SUPPORTED_ERR[2m:[0m [0m[33m9[0m[0m[2m,[0m
  [0mINUSE_ATTRIBUTE_ERR[2m:[0m [0m[33m10[0m[0m[2m,[0m
  [0mINVALID_STATE_ERR[2m:[0m [0m[33m11[0m[0m[2m,[0m
  [0mSYNTAX_ERR[2m:[0m [0m[33m12[0m[0m[2m,[0m
  [0mINVALID_MODIFICATION_ERR[2m:[0m [0m[33m13[0m[0m[2m,[0m
  [0mNAMESPACE_ERR[2m:[0m [0m[33m14[0m[0m[2m,[0m
  [0mINVALID_ACCESS_ERR[2m:[0m [0m[33m15[0m[0m[2m,[0m
  [0mVALIDATION_ERR[2m:[0m [0m[33m16[0m[0m[2m,[0m
  [0mTYPE_MISMATCH_ERR[2m:[0m [0m[33m17[0m[0m[2m,[0m
  [0mSECURITY_ERR[2m:[0m [0m[33m18[0m[0m[2m,[0m
  [0mNETWORK_ERR[2m:[0m [0m[33m19[0m[0m[2m,[0m
  [0mABORT_ERR[2m:[0m [0m[33m20[0m[0m[2m,[0m
  [0mURL_MISMATCH_ERR[2m:[0m [0m[33m21[0m[0m[2m,[0m
  [0mQUOTA_EXCEEDED_ERR[2m:[0m [0m[33m22[0m[0m[2m,[0m
  [0mTIMEOUT_ERR[2m:[0m [0m[33m23[0m[0m[2m,[0m
  [0mINVALID_NODE_TYPE_ERR[2m:[0m [0m[33m24[0m[0m[2m,[0m
  [0mDATA_CLONE_ERR[2m:[0m [0m[33m25[0m[0m[2m,[0m
  [0mtoString[2m:[0m [36m[Function: toString][0m[0m[2m,[0m
}[0m
Parsing Completed
Time Completed Parsing:  [0m[33m251388.615887[0m
[0m[31mFetch error in [generateNaturalResponse] :  DOMException {
  [0mstack[2m:[0m [0m[32m""[0m[0m[2m,[0m
  [0mcode[2m:[0m [0m[33m23[0m[0m[2m,[0m
  [0mname[2m:[0m [0m[32m[0m[32m"TimeoutError"[0m[0m[0m[2m,[0m
  [0mmessage[2m:[0m [0m[32m[0m[32m"The operation timed out."[0m[0m[0m[2m,[0m
  [0mINDEX_SIZE_ERR[2m:[0m [0m[33m1[0m[0m[2m,[0m
  [0mDOMSTRING_SIZE_ERR[2m:[0m [0m[33m2[0m[0m[2m,[0m
  [0mHIERARCHY_REQUEST_ERR[2m:[0m [0m[33m3[0m[0m[2m,[0m
  [0mWRONG_DOCUMENT_ERR[2m:[0m [0m[33m4[0m[0m[2m,[0m
  [0mINVALID_CHARACTER_ERR[2m:[0m [0m[33m5[0m[0m[2m,[0m
  [0mNO_DATA_ALLOWED_ERR[2m:[0m [0m[33m6[0m[0m[2m,[0m
  [0mNO_MODIFICATION_ALLOWED_ERR[2m:[0m [0m[33m7[0m[0m[2m,[0m
  [0mNOT_FOUND_ERR[2m:[0m [0m[33m8[0m[0m[2m,[0m
  [0mNOT_SUPPORTED_ERR[2m:[0m [0m[33m9[0m[0m[2m,[0m
  [0mINUSE_ATTRIBUTE_ERR[2m:[0m [0m[33m10[0m[0m[2m,[0m
  [0mINVALID_STATE_ERR[2m:[0m [0m[33m11[0m[0m[2m,[0m
  [0mSYNTAX_ERR[2m:[0m [0m[33m12[0m[0m[2m,[0m
  [0mINVALID_MODIFICATION_ERR[2m:[0m [0m[33m13[0m[0m[2m,[0m
  [0mNAMESPACE_ERR[2m:[0m [0m[33m14[0m[0m[2m,[0m
  [0mINVALID_ACCESS_ERR[2m:[0m [0m[33m15[0m[0m[2m,[0m
  [0mVALIDATION_ERR[2m:[0m [0m[33m16[0m[0m[2m,[0m
  [0mTYPE_MISMATCH_ERR[2m:[0m [0m[33m17[0m[0m[2m,[0m
  [0mSECURITY_ERR[2m:[0m [0m[33m18[0m[0m[2m,[0m
  [0mNETWORK_ERR[2m:[0m [0m[33m19[0m[0m[2m,[0m
  [0mABORT_ERR[2m:[0m [0m[33m20[0m[0m[2m,[0m
  [0mURL_MISMATCH_ERR[2m:[0m [0m[33m21[0m[0m[2m,[0m
  [0mQUOTA_EXCEEDED_ERR[2m:[0m [0m[33m22[0m[0m[2m,[0m
  [0mTIMEOUT_ERR[2m:[0m [0m[33m23[0m[0m[2m,[0m
  [0mINVALID_NODE_TYPE_ERR[2m:[0m [0m[33m24[0m[0m[2m,[0m
  [0mDATA_CLONE_ERR[2m:[0m [0m[33m25[0m[0m[2m,[0m
  [0mtoString[2m:[0m [36m[Function: toString][0m[0m[2m,[0m
}[0m
Natural Response generated with intent add in 251391.505877 
[0m[31mDetailed LLM setup error: DOMException {
  [0mstack[2m:[0m [0m[32m""[0m[0m[2m,[0m
  [0mcode[2m:[0m [0m[33m23[0m[0m[2m,[0m
  [0mname[2m:[0m [0m[32m[0m[32m"TimeoutError"[0m[0m[0m[2m,[0m
  [0mmessage[2m:[0m [0m[32m[0m[32m"The operation timed out."[0m[0m[0m[2m,[0m
  [0mINDEX_SIZE_ERR[2m:[0m [0m[33m1[0m[0m[2m,[0m
  [0mDOMSTRING_SIZE_ERR[2m:[0m [0m[33m2[0m[0m[2m,[0m
  [0mHIERARCHY_REQUEST_ERR[2m:[0m [0m[33m3[0m[0m[2m,[0m
  [0mWRONG_DOCUMENT_ERR[2m:[0m [0m[33m4[0m[0m[2m,[0m
  [0mINVALID_CHARACTER_ERR[2m:[0m [0m[33m5[0m[0m[2m,[0m
  [0mNO_DATA_ALLOWED_ERR[2m:[0m [0m[33m6[0m[0m[2m,[0m
  [0mNO_MODIFICATION_ALLOWED_ERR[2m:[0m [0m[33m7[0m[0m[2m,[0m
  [0mNOT_FOUND_ERR[2m:[0m [0m[33m8[0m[0m[2m,[0m
  [0mNOT_SUPPORTED_ERR[2m:[0m [0m[33m9[0m[0m[2m,[0m
  [0mINUSE_ATTRIBUTE_ERR[2m:[0m [0m[33m10[0m[0m[2m,[0m
  [0mINVALID_STATE_ERR[2m:[0m [0m[33m11[0m[0m[2m,[0m
  [0mSYNTAX_ERR[2m:[0m [0m[33m12[0m[0m[2m,[0m
  [0mINVALID_MODIFICATION_ERR[2m:[0m [0m[33m13[0m[0m[2m,[0m
  [0mNAMESPACE_ERR[2m:[0m [0m[33m14[0m[0m[2m,[0m
  [0mINVALID_ACCESS_ERR[2m:[0m [0m[33m15[0m[0m[2m,[0m
  [0mVALIDATION_ERR[2m:[0m [0m[33m16[0m[0m[2m,[0m
  [0mTYPE_MISMATCH_ERR[2m:[0m [0m[33m17[0m[0m[2m,[0m
  [0mSECURITY_ERR[2m:[0m [0m[33m18[0m[0m[2m,[0m
  [0mNETWORK_ERR[2m:[0m [0m[33m19[0m[0m[2m,[0m
  [0mABORT_ERR[2m:[0m [0m[33m20[0m[0m[2m,[0m
  [0mURL_MISMATCH_ERR[2m:[0m [0m[33m21[0m[0m[2m,[0m
  [0mQUOTA_EXCEEDED_ERR[2m:[0m [0m[33m22[0m[0m[2m,[0m
  [0mTIMEOUT_ERR[2m:[0m [0m[33m23[0m[0m[2m,[0m
  [0mINVALID_NODE_TYPE_ERR[2m:[0m [0m[33m24[0m[0m[2m,[0m
  [0mDATA_CLONE_ERR[2m:[0m [0m[33m25[0m[0m[2m,[0m
  [0mtoString[2m:[0m [36m[Function: toString][0m[0m[2m,[0m
}[0m
Parsing Completed
Time Completed Parsing:  [0m[33m282273.291838[0m
[0m[31mFetch error in [generateNaturalResponse] :  DOMException {
  [0mstack[2m:[0m [0m[32m""[0m[0m[2m,[0m
  [0mcode[2m:[0m [0m[33m23[0m[0m[2m,[0m
  [0mname[2m:[0m [0m[32m[0m[32m"TimeoutError"[0m[0m[0m[2m,[0m
  [0mmessage[2m:[0m [0m[32m[0m[32m"The operation timed out."[0m[0m[0m[2m,[0m
  [0mINDEX_SIZE_ERR[2m:[0m [0m[33m1[0m[0m[2m,[0m
  [0mDOMSTRING_SIZE_ERR[2m:[0m [0m[33m2[0m[0m[2m,[0m
  [0mHIERARCHY_REQUEST_ERR[2m:[0m [0m[33m3[0m[0m[2m,[0m
  [0mWRONG_DOCUMENT_ERR[2m:[0m [0m[33m4[0m[0m[2m,[0m
  [0mINVALID_CHARACTER_ERR[2m:[0m [0m[33m5[0m[0m[2m,[0m
  [0mNO_DATA_ALLOWED_ERR[2m:[0m [0m[33m6[0m[0m[2m,[0m
  [0mNO_MODIFICATION_ALLOWED_ERR[2m:[0m [0m[33m7[0m[0m[2m,[0m
  [0mNOT_FOUND_ERR[2m:[0m [0m[33m8[0m[0m[2m,[0m
  [0mNOT_SUPPORTED_ERR[2m:[0m [0m[33m9[0m[0m[2m,[0m
  [0mINUSE_ATTRIBUTE_ERR[2m:[0m [0m[33m10[0m[0m[2m,[0m
  [0mINVALID_STATE_ERR[2m:[0m [0m[33m11[0m[0m[2m,[0m
  [0mSYNTAX_ERR[2m:[0m [0m[33m12[0m[0m[2m,[0m
  [0mINVALID_MODIFICATION_ERR[2m:[0m [0m[33m13[0m[0m[2m,[0m
  [0mNAMESPACE_ERR[2m:[0m [0m[33m14[0m[0m[2m,[0m
  [0mINVALID_ACCESS_ERR[2m:[0m [0m[33m15[0m[0m[2m,[0m
  [0mVALIDATION_ERR[2m:[0m [0m[33m16[0m[0m[2m,[0m
  [0mTYPE_MISMATCH_ERR[2m:[0m [0m[33m17[0m[0m[2m,[0m
  [0mSECURITY_ERR[2m:[0m [0m[33m18[0m[0m[2m,[0m
  [0mNETWORK_ERR[2m:[0m [0m[33m19[0m[0m[2m,[0m
  [0mABORT_ERR[2m:[0m [0m[33m20[0m[0m[2m,[0m
  [0mURL_MISMATCH_ERR[2m:[0m [0m[33m21[0m[0m[2m,[0m
  [0mQUOTA_EXCEEDED_ERR[2m:[0m [0m[33m22[0m[0m[2m,[0m
  [0mTIMEOUT_ERR[2m:[0m [0m[33m23[0m[0m[2m,[0m
  [0mINVALID_NODE_TYPE_ERR[2m:[0m [0m[33m24[0m[0m[2m,[0m
  [0mDATA_CLONE_ERR[2m:[0m [0m[33m25[0m[0m[2m,[0m
  [0mtoString[2m:[0m [36m[Function: toString][0m[0m[2m,[0m
}[0m
Natural Response generated with intent add in 282276.017846 
[0m[31mâœ—[0m [0mAPI Endpoint : POST /mcp/tools/process-query[2m >[0m[1m should handle single event add query ("add" intent)[0m [0m[2m[[0m[33m30000.34ms[0m[2m][0m
  [2m^[0m [31mthis test timed out after 30000ms.[0m
[{"text":"tomorrow at 10 AM","start":"2025-10-10T17:00:00.000Z","end":null}]
User Input:  Schedule a meeting tomorrow at 10 AM in PDT
classifyIntent is called
events is parsed with regex:  [
  {
    [0msummary[2m:[0m [0m[32m[0m[32m"Event"[0m[0m[0m[2m,[0m
    [0mdate[2m:[0m [0m[32m[0m[32m"2025-10-10"[0m[0m[0m[2m,[0m
    [0mstartTime[2m:[0m [0m[32m[0m[32m"10:00"[0m[0m[0m[2m,[0m
    [0mendTime[2m:[0m [0m[2mundefined[0m[0m[2m,[0m
    [0mduration_minutes[2m:[0m [0m[33m60[0m[0m[2m,[0m
    [0mtimezone[2m:[0m [0m[32m[0m[32m"America/Los_Angeles"[0m[0m[0m[2m,[0m
    [0mlocation[2m:[0m [0m[32m[0m[32m"10 AM in PDT"[0m[0m[0m[2m,[0m
    [0mdisplayTime[2m:[0m [0m[32m[0m[32m"10:00 am"[0m[0m[0m[2m,[0m
  }
]
Regex partial imperfect-refining with LLM
Ready to send Payload:  {
  [0mpartial[2m:[0m {
    [0mevents[2m:[0m [
      [0m[36m[Object ...][0m
    ][0m[2m,[0m
    [0mconfirm[2m:[0m [0m[32m[0m[32m"Missing end time. Confirm default 60 minutes?"[0m[0m[0m[2m,[0m
  }[0m[2m,[0m
  [0minput[2m:[0m [0m[32m[0m[32m"Schedule a meeting tomorrow at 10 AM in PDT"[0m[0m[0m[2m,[0m
  [0mtimezone[2m:[0m [0m[32m[0m[32m"America/Los_Angeles"[0m[0m[0m[2m,[0m
  [0mreference_date[2m:[0m [0m[32m[0m[32m"2025-10-15"[0m[0m[0m[2m,[0m
  [0mparsed_results[2m:[0m [
    {
      [0mtext[2m:[0m [0m[32m[0m[32m"tomorrow at 10 AM"[0m[0m[0m[2m,[0m
      [0mstart[2m:[0m [0m[32m[0m[32m"2025-10-10T17:00:00.000Z"[0m[0m[0m[2m,[0m
      [0mend[2m:[0m [0m[33mnull[0m[0m[2m,[0m
    }
  ][0m[2m,[0m
}
[0m[31mâœ—[0m [0mAPI Endpoint : POST /mcp/tools/process-query[2m >[0m[1m should handle single event add query ("add" intent)[0m [0m[2m[[0m[33m30000.06ms[0m[2m][0m
  [2m^[0m [31mthis test timed out after 30000ms.[0m
[{"text":"October 1, 2025 from 10am to 11am","start":"2025-10-01T17:00:00.000Z","end":"2025-10-01T18:00:00.000Z"},{"text":"October 2, 2025 from 12pm to 1pm","start":"2025-10-02T19:00:00.000Z","end":"2025-10-02T20:00:00.000Z"},{"text":"October 3, 2025 from 2pm to 3pm","start":"2025-10-03T21:00:00.000Z","end":"2025-10-03T22:00:00.000Z"},{"text":"October 4, 2025 from 6am to 7am","start":"2025-10-04T13:00:00.000Z","end":"2025-10-04T14:00:00.000Z"},{"text":"October 5, 2025 from 8pm to 10pm","start":"2025-10-06T03:00:00.000Z","end":"2025-10-06T05:00:00.000Z"},{"text":"October 6, 2025 from 9am to 12pm","start":"2025-10-06T16:00:00.000Z","end":"2025-10-06T19:00:00.000Z"},{"text":"October 7, 2025 from 7pm to 8pm","start":"2025-10-08T02:00:00.000Z","end":"2025-10-08T03:00:00.000Z"}]
User Input:  Add events: Meeting on October 1, 2025 from 10am to 11am at office; Lunch on October 2, 2025 from 12pm to 1pm at cafe; Call on October 3, 2025 from 2pm to 3pm; Workout on October 4, 2025 from 6am to 7am at gym; Movie on October 5, 2025 from 8pm to 10pm at theater; Hiking on October 6, 2025 from 9am to 12pm at park; Dinner on October 7, 2025 from 7pm to 8pm at home
classifyIntent is called
events is parsed with regex:  [
  {
    [0msummary[2m:[0m [0m[32m[0m[32m"events: Meeting on October 1, 2025"[0m[0m[0m[2m,[0m
    [0mdate[2m:[0m [0m[32m[0m[32m"2025-10-01"[0m[0m[0m[2m,[0m
    [0mstartTime[2m:[0m [0m[32m[0m[32m"10:00"[0m[0m[0m[2m,[0m
    [0mendTime[2m:[0m [0m[32m[0m[32m"11:00"[0m[0m[0m[2m,[0m
    [0mduration_minutes[2m:[0m [0m[33m60[0m[0m[2m,[0m
    [0mtimezone[2m:[0m [0m[32m[0m[32m"America/Los_Angeles"[0m[0m[0m[2m,[0m
    [0mlocation[2m:[0m [0m[32m[0m[32m"office"[0m[0m[0m[2m,[0m
    [0mdisplayTime[2m:[0m [0m[32m[0m[32m"10:00 am"[0m[0m[0m[2m,[0m
  }[0m[2m,[0m {
    [0msummary[2m:[0m [0m[32m[0m[32m"Lunch on October 2, 2025"[0m[0m[0m[2m,[0m
    [0mdate[2m:[0m [0m[32m[0m[32m"2025-10-02"[0m[0m[0m[2m,[0m
    [0mstartTime[2m:[0m [0m[32m[0m[32m"12:00"[0m[0m[0m[2m,[0m
    [0mendTime[2m:[0m [0m[32m[0m[32m"13:00"[0m[0m[0m[2m,[0m
    [0mduration_minutes[2m:[0m [0m[33m60[0m[0m[2m,[0m
    [0mtimezone[2m:[0m [0m[32m[0m[32m"America/Los_Angeles"[0m[0m[0m[2m,[0m
    [0mlocation[2m:[0m [0m[32m[0m[32m"cafe"[0m[0m[0m[2m,[0m
    [0mdisplayTime[2m:[0m [0m[32m[0m[32m"12:00 pm"[0m[0m[0m[2m,[0m
  }[0m[2m,[0m {
    [0msummary[2m:[0m [0m[32m[0m[32m"Call on October 3, 2025"[0m[0m[0m[2m,[0m
    [0mdate[2m:[0m [0m[32m[0m[32m"2025-10-03"[0m[0m[0m[2m,[0m
    [0mstartTime[2m:[0m [0m[32m[0m[32m"14:00"[0m[0m[0m[2m,[0m
    [0mendTime[2m:[0m [0m[32m[0m[32m"15:00"[0m[0m[0m[2m,[0m
    [0mduration_minutes[2m:[0m [0m[33m60[0m[0m[2m,[0m
    [0mtimezone[2m:[0m [0m[32m[0m[32m"America/Los_Angeles"[0m[0m[0m[2m,[0m
    [0mlocation[2m:[0m [0m[33mnull[0m[0m[2m,[0m
    [0mdisplayTime[2m:[0m [0m[32m[0m[32m"14:00 pm"[0m[0m[0m[2m,[0m
  }[0m[2m,[0m {
    [0msummary[2m:[0m [0m[32m[0m[32m"Workout on October 4, 2025"[0m[0m[0m[2m,[0m
    [0mdate[2m:[0m [0m[32m[0m[32m"2025-10-04"[0m[0m[0m[2m,[0m
    [0mstartTime[2m:[0m [0m[32m[0m[32m"06:00"[0m[0m[0m[2m,[0m
    [0mendTime[2m:[0m [0m[32m[0m[32m"07:00"[0m[0m[0m[2m,[0m
    [0mduration_minutes[2m:[0m [0m[33m60[0m[0m[2m,[0m
    [0mtimezone[2m:[0m [0m[32m[0m[32m"America/Los_Angeles"[0m[0m[0m[2m,[0m
    [0mlocation[2m:[0m [0m[32m[0m[32m"gym"[0m[0m[0m[2m,[0m
    [0mdisplayTime[2m:[0m [0m[32m[0m[32m"06:00 am"[0m[0m[0m[2m,[0m
  }[0m[2m,[0m {
    [0msummary[2m:[0m [0m[32m[0m[32m"Movie on October 5, 2025"[0m[0m[0m[2m,[0m
    [0mdate[2m:[0m [0m[32m[0m[32m"2025-10-05"[0m[0m[0m[2m,[0m
    [0mstartTime[2m:[0m [0m[32m[0m[32m"20:00"[0m[0m[0m[2m,[0m
    [0mendTime[2m:[0m [0m[32m[0m[32m"22:00"[0m[0m[0m[2m,[0m
    [0mduration_minutes[2m:[0m [0m[33m120[0m[0m[2m,[0m
    [0mtimezone[2m:[0m [0m[32m[0m[32m"America/Los_Angeles"[0m[0m[0m[2m,[0m
    [0mlocation[2m:[0m [0m[32m[0m[32m"theater"[0m[0m[0m[2m,[0m
    [0mdisplayTime[2m:[0m [0m[32m[0m[32m"20:00 pm"[0m[0m[0m[2m,[0m
  }[0m[2m,[0m {
    [0msummary[2m:[0m [0m[32m[0m[32m"Hiking on October 6, 2025"[0m[0m[0m[2m,[0m
    [0mdate[2m:[0m [0m[32m[0m[32m"2025-10-06"[0m[0m[0m[2m,[0m
    [0mstartTime[2m:[0m [0m[32m[0m[32m"09:00"[0m[0m[0m[2m,[0m
    [0mendTime[2m:[0m [0m[32m[0m[32m"12:00"[0m[0m[0m[2m,[0m
    [0mduration_minutes[2m:[0m [0m[33m180[0m[0m[2m,[0m
    [0mtimezone[2m:[0m [0m[32m[0m[32m"America/Los_Angeles"[0m[0m[0m[2m,[0m
    [0mlocation[2m:[0m [0m[32m[0m[32m"park"[0m[0m[0m[2m,[0m
    [0mdisplayTime[2m:[0m [0m[32m[0m[32m"09:00 am"[0m[0m[0m[2m,[0m
  }[0m[2m,[0m {
    [0msummary[2m:[0m [0m[32m[0m[32m"Dinner on October 7, 2025"[0m[0m[0m[2m,[0m
    [0mdate[2m:[0m [0m[32m[0m[32m"2025-10-07"[0m[0m[0m[2m,[0m
    [0mstartTime[2m:[0m [0m[32m[0m[32m"19:00"[0m[0m[0m[2m,[0m
    [0mendTime[2m:[0m [0m[32m[0m[32m"20:00"[0m[0m[0m[2m,[0m
    [0mduration_minutes[2m:[0m [0m[33m60[0m[0m[2m,[0m
    [0mtimezone[2m:[0m [0m[32m[0m[32m"America/Los_Angeles"[0m[0m[0m[2m,[0m
    [0mlocation[2m:[0m [0m[32m[0m[32m"home"[0m[0m[0m[2m,[0m
    [0mdisplayTime[2m:[0m [0m[32m[0m[32m"19:00 pm"[0m[0m[0m[2m,[0m
  }
]
Regex partial imperfect-refining with LLM
Ready to send Payload:  {
  [0mpartial[2m:[0m [
    {
      [0msummary[2m:[0m [0m[32m[0m[32m"events: Meeting on October 1, 2025"[0m[0m[0m[2m,[0m
      [0mdate[2m:[0m [0m[32m[0m[32m"2025-10-01"[0m[0m[0m[2m,[0m
      [0mstartTime[2m:[0m [0m[32m[0m[32m"10:00"[0m[0m[0m[2m,[0m
      [0mendTime[2m:[0m [0m[32m[0m[32m"11:00"[0m[0m[0m[2m,[0m
      [0mduration_minutes[2m:[0m [0m[33m60[0m[0m[2m,[0m
      [0mtimezone[2m:[0m [0m[32m[0m[32m"America/Los_Angeles"[0m[0m[0m[2m,[0m
      [0mlocation[2m:[0m [0m[32m[0m[32m"office"[0m[0m[0m[2m,[0m
      [0mdisplayTime[2m:[0m [0m[32m[0m[32m"10:00 am"[0m[0m[0m[2m,[0m
    }[0m[2m,[0m {
      [0msummary[2m:[0m [0m[32m[0m[32m"Lunch on October 2, 2025"[0m[0m[0m[2m,[0m
      [0mdate[2m:[0m [0m[32m[0m[32m"2025-10-02"[0m[0m[0m[2m,[0m
      [0mstartTime[2m:[0m [0m[32m[0m[32m"12:00"[0m[0m[0m[2m,[0m
      [0mendTime[2m:[0m [0m[32m[0m[32m"13:00"[0m[0m[0m[2m,[0m
      [0mduration_minutes[2m:[0m [0m[33m60[0m[0m[2m,[0m
      [0mtimezone[2m:[0m [0m[32m[0m[32m"America/Los_Angeles"[0m[0m[0m[2m,[0m
      [0mlocation[2m:[0m [0m[32m[0m[32m"cafe"[0m[0m[0m[2m,[0m
      [0mdisplayTime[2m:[0m [0m[32m[0m[32m"12:00 pm"[0m[0m[0m[2m,[0m
    }[0m[2m,[0m {
      [0msummary[2m:[0m [0m[32m[0m[32m"Call on October 3, 2025"[0m[0m[0m[2m,[0m
      [0mdate[2m:[0m [0m[32m[0m[32m"2025-10-03"[0m[0m[0m[2m,[0m
      [0mstartTime[2m:[0m [0m[32m[0m[32m"14:00"[0m[0m[0m[2m,[0m
      [0mendTime[2m:[0m [0m[32m[0m[32m"15:00"[0m[0m[0m[2m,[0m
      [0mduration_minutes[2m:[0m [0m[33m60[0m[0m[2m,[0m
      [0mtimezone[2m:[0m [0m[32m[0m[32m"America/Los_Angeles"[0m[0m[0m[2m,[0m
      [0mlocation[2m:[0m [0m[33mnull[0m[0m[2m,[0m
      [0mdisplayTime[2m:[0m [0m[32m[0m[32m"14:00 pm"[0m[0m[0m[2m,[0m
    }[0m[2m,[0m {
      [0msummary[2m:[0m [0m[32m[0m[32m"Workout on October 4, 2025"[0m[0m[0m[2m,[0m
      [0mdate[2m:[0m [0m[32m[0m[32m"2025-10-04"[0m[0m[0m[2m,[0m
      [0mstartTime[2m:[0m [0m[32m[0m[32m"06:00"[0m[0m[0m[2m,[0m
      [0mendTime[2m:[0m [0m[32m[0m[32m"07:00"[0m[0m[0m[2m,[0m
      [0mduration_minutes[2m:[0m [0m[33m60[0m[0m[2m,[0m
      [0mtimezone[2m:[0m [0m[32m[0m[32m"America/Los_Angeles"[0m[0m[0m[2m,[0m
      [0mlocation[2m:[0m [0m[32m[0m[32m"gym"[0m[0m[0m[2m,[0m
      [0mdisplayTime[2m:[0m [0m[32m[0m[32m"06:00 am"[0m[0m[0m[2m,[0m
    }[0m[2m,[0m {
      [0msummary[2m:[0m [0m[32m[0m[32m"Movie on October 5, 2025"[0m[0m[0m[2m,[0m
      [0mdate[2m:[0m [0m[32m[0m[32m"2025-10-05"[0m[0m[0m[2m,[0m
      [0mstartTime[2m:[0m [0m[32m[0m[32m"20:00"[0m[0m[0m[2m,[0m
      [0mendTime[2m:[0m [0m[32m[0m[32m"22:00"[0m[0m[0m[2m,[0m
      [0mduration_minutes[2m:[0m [0m[33m120[0m[0m[2m,[0m
      [0mtimezone[2m:[0m [0m[32m[0m[32m"America/Los_Angeles"[0m[0m[0m[2m,[0m
      [0mlocation[2m:[0m [0m[32m[0m[32m"theater"[0m[0m[0m[2m,[0m
      [0mdisplayTime[2m:[0m [0m[32m[0m[32m"20:00 pm"[0m[0m[0m[2m,[0m
    }[0m[2m,[0m {
      [0msummary[2m:[0m [0m[32m[0m[32m"Hiking on October 6, 2025"[0m[0m[0m[2m,[0m
      [0mdate[2m:[0m [0m[32m[0m[32m"2025-10-06"[0m[0m[0m[2m,[0m
      [0mstartTime[2m:[0m [0m[32m[0m[32m"09:00"[0m[0m[0m[2m,[0m
      [0mendTime[2m:[0m [0m[32m[0m[32m"12:00"[0m[0m[0m[2m,[0m
      [0mduration_minutes[2m:[0m [0m[33m180[0m[0m[2m,[0m
      [0mtimezone[2m:[0m [0m[32m[0m[32m"America/Los_Angeles"[0m[0m[0m[2m,[0m
      [0mlocation[2m:[0m [0m[32m[0m[32m"park"[0m[0m[0m[2m,[0m
      [0mdisplayTime[2m:[0m [0m[32m[0m[32m"09:00 am"[0m[0m[0m[2m,[0m
    }[0m[2m,[0m {
      [0msummary[2m:[0m [0m[32m[0m[32m"Dinner on October 7, 2025"[0m[0m[0m[2m,[0m
      [0mdate[2m:[0m [0m[32m[0m[32m"2025-10-07"[0m[0m[0m[2m,[0m
      [0mstartTime[2m:[0m [0m[32m[0m[32m"19:00"[0m[0m[0m[2m,[0m
      [0mendTime[2m:[0m [0m[32m[0m[32m"20:00"[0m[0m[0m[2m,[0m
      [0mduration_minutes[2m:[0m [0m[33m60[0m[0m[2m,[0m
      [0mtimezone[2m:[0m [0m[32m[0m[32m"America/Los_Angeles"[0m[0m[0m[2m,[0m
      [0mlocation[2m:[0m [0m[32m[0m[32m"home"[0m[0m[0m[2m,[0m
      [0mdisplayTime[2m:[0m [0m[32m[0m[32m"19:00 pm"[0m[0m[0m[2m,[0m
    }
  ][0m[2m,[0m
  [0minput[2m:[0m [0m[32m[0m[32m"Add events: Meeting on October 1, 2025 from 10am to 11am at office; Lunch on October 2, 2025 from 12pm to 1pm at cafe; Call on October 3, 2025 from 2pm to 3pm; Workout on October 4, 2025 from 6am to 7am at gym; Movie on October 5, 2025 from 8pm to 10pm at theater; Hiking on October 6, 2025 from 9am to 12pm at park; Dinner on October 7, 2025 from 7pm to 8pm at home"[0m[0m[0m[2m,[0m
  [0mtimezone[2m:[0m [0m[32m[0m[32m"America/Los_Angeles"[0m[0m[0m[2m,[0m
  [0mreference_date[2m:[0m [0m[32m[0m[32m"2025-10-15"[0m[0m[0m[2m,[0m
  [0mparsed_results[2m:[0m [
    {
      [0mtext[2m:[0m [0m[32m[0m[32m"October 1, 2025 from 10am to 11am"[0m[0m[0m[2m,[0m
      [0mstart[2m:[0m [0m[32m[0m[32m"2025-10-01T17:00:00.000Z"[0m[0m[0m[2m,[0m
      [0mend[2m:[0m [0m[32m[0m[32m"2025-10-01T18:00:00.000Z"[0m[0m[0m[2m,[0m
    }[0m[2m,[0m {
      [0mtext[2m:[0m [0m[32m[0m[32m"October 2, 2025 from 12pm to 1pm"[0m[0m[0m[2m,[0m
      [0mstart[2m:[0m [0m[32m[0m[32m"2025-10-02T19:00:00.000Z"[0m[0m[0m[2m,[0m
      [0mend[2m:[0m [0m[32m[0m[32m"2025-10-02T20:00:00.000Z"[0m[0m[0m[2m,[0m
    }[0m[2m,[0m {
      [0mtext[2m:[0m [0m[32m[0m[32m"October 3, 2025 from 2pm to 3pm"[0m[0m[0m[2m,[0m
      [0mstart[2m:[0m [0m[32m[0m[32m"2025-10-03T21:00:00.000Z"[0m[0m[0m[2m,[0m
      [0mend[2m:[0m [0m[32m[0m[32m"2025-10-03T22:00:00.000Z"[0m[0m[0m[2m,[0m
    }[0m[2m,[0m {
      [0mtext[2m:[0m [0m[32m[0m[32m"October 4, 2025 from 6am to 7am"[0m[0m[0m[2m,[0m
      [0mstart[2m:[0m [0m[32m[0m[32m"2025-10-04T13:00:00.000Z"[0m[0m[0m[2m,[0m
      [0mend[2m:[0m [0m[32m[0m[32m"2025-10-04T14:00:00.000Z"[0m[0m[0m[2m,[0m
    }[0m[2m,[0m {
      [0mtext[2m:[0m [0m[32m[0m[32m"October 5, 2025 from 8pm to 10pm"[0m[0m[0m[2m,[0m
      [0mstart[2m:[0m [0m[32m[0m[32m"2025-10-06T03:00:00.000Z"[0m[0m[0m[2m,[0m
      [0mend[2m:[0m [0m[32m[0m[32m"2025-10-06T05:00:00.000Z"[0m[0m[0m[2m,[0m
    }[0m[2m,[0m {
      [0mtext[2m:[0m [0m[32m[0m[32m"October 6, 2025 from 9am to 12pm"[0m[0m[0m[2m,[0m
      [0mstart[2m:[0m [0m[32m[0m[32m"2025-10-06T16:00:00.000Z"[0m[0m[0m[2m,[0m
      [0mend[2m:[0m [0m[32m[0m[32m"2025-10-06T19:00:00.000Z"[0m[0m[0m[2m,[0m
    }[0m[2m,[0m {
      [0mtext[2m:[0m [0m[32m[0m[32m"October 7, 2025 from 7pm to 8pm"[0m[0m[0m[2m,[0m
      [0mstart[2m:[0m [0m[32m[0m[32m"2025-10-08T02:00:00.000Z"[0m[0m[0m[2m,[0m
      [0mend[2m:[0m [0m[32m[0m[32m"2025-10-08T03:00:00.000Z"[0m[0m[0m[2m,[0m
    }
  ][0m[2m,[0m
}
Removed stale event: b7d2a1d4-d23e-49ad-9564-1a6d725f4b7d
Removed stale event: 188581d6-9587-42af-9f87-73b320b2dc66
Removed stale event: 188581d6-9587-42af-9f87-73b320b2dc66
Removed stale event: 188581d6-9587-42af-9f87-73b320b2dc66
Removed stale event: 188581d6-9587-42af-9f87-73b320b2dc66
Removed stale event: 188581d6-9587-42af-9f87-73b320b2dc66
Removed stale event: 188581d6-9587-42af-9f87-73b320b2dc66
Removed stale event: 188581d6-9587-42af-9f87-73b320b2dc66
[0m[31mError in classifyIntent LLM fallback: DOMException {
  [0mstack[2m:[0m [0m[32m""[0m[0m[2m,[0m
  [0mcode[2m:[0m [0m[33m23[0m[0m[2m,[0m
  [0mname[2m:[0m [0m[32m[0m[32m"TimeoutError"[0m[0m[0m[2m,[0m
  [0mmessage[2m:[0m [0m[32m[0m[32m"The operation timed out."[0m[0m[0m[2m,[0m
  [0mINDEX_SIZE_ERR[2m:[0m [0m[33m1[0m[0m[2m,[0m
  [0mDOMSTRING_SIZE_ERR[2m:[0m [0m[33m2[0m[0m[2m,[0m
  [0mHIERARCHY_REQUEST_ERR[2m:[0m [0m[33m3[0m[0m[2m,[0m
  [0mWRONG_DOCUMENT_ERR[2m:[0m [0m[33m4[0m[0m[2m,[0m
  [0mINVALID_CHARACTER_ERR[2m:[0m [0m[33m5[0m[0m[2m,[0m
  [0mNO_DATA_ALLOWED_ERR[2m:[0m [0m[33m6[0m[0m[2m,[0m
  [0mNO_MODIFICATION_ALLOWED_ERR[2m:[0m [0m[33m7[0m[0m[2m,[0m
  [0mNOT_FOUND_ERR[2m:[0m [0m[33m8[0m[0m[2m,[0m
  [0mNOT_SUPPORTED_ERR[2m:[0m [0m[33m9[0m[0m[2m,[0m
  [0mINUSE_ATTRIBUTE_ERR[2m:[0m [0m[33m10[0m[0m[2m,[0m
  [0mINVALID_STATE_ERR[2m:[0m [0m[33m11[0m[0m[2m,[0m
  [0mSYNTAX_ERR[2m:[0m [0m[33m12[0m[0m[2m,[0m
  [0mINVALID_MODIFICATION_ERR[2m:[0m [0m[33m13[0m[0m[2m,[0m
  [0mNAMESPACE_ERR[2m:[0m [0m[33m14[0m[0m[2m,[0m
  [0mINVALID_ACCESS_ERR[2m:[0m [0m[33m15[0m[0m[2m,[0m
  [0mVALIDATION_ERR[2m:[0m [0m[33m16[0m[0m[2m,[0m
  [0mTYPE_MISMATCH_ERR[2m:[0m [0m[33m17[0m[0m[2m,[0m
  [0mSECURITY_ERR[2m:[0m [0m[33m18[0m[0m[2m,[0m
  [0mNETWORK_ERR[2m:[0m [0m[33m19[0m[0m[2m,[0m
  [0mABORT_ERR[2m:[0m [0m[33m20[0m[0m[2m,[0m
  [0mURL_MISMATCH_ERR[2m:[0m [0m[33m21[0m[0m[2m,[0m
  [0mQUOTA_EXCEEDED_ERR[2m:[0m [0m[33m22[0m[0m[2m,[0m
  [0mTIMEOUT_ERR[2m:[0m [0m[33m23[0m[0m[2m,[0m
  [0mINVALID_NODE_TYPE_ERR[2m:[0m [0m[33m24[0m[0m[2m,[0m
  [0mDATA_CLONE_ERR[2m:[0m [0m[33m25[0m[0m[2m,[0m
  [0mtoString[2m:[0m [36m[Function: toString][0m[0m[2m,[0m
}[0m
[0m[31mError in classifyIntent LLM fallback: DOMException {
  [0mstack[2m:[0m [0m[32m""[0m[0m[2m,[0m
  [0mcode[2m:[0m [0m[33m23[0m[0m[2m,[0m
  [0mname[2m:[0m [0m[32m[0m[32m"TimeoutError"[0m[0m[0m[2m,[0m
  [0mmessage[2m:[0m [0m[32m[0m[32m"The operation timed out."[0m[0m[0m[2m,[0m
  [0mINDEX_SIZE_ERR[2m:[0m [0m[33m1[0m[0m[2m,[0m
  [0mDOMSTRING_SIZE_ERR[2m:[0m [0m[33m2[0m[0m[2m,[0m
  [0mHIERARCHY_REQUEST_ERR[2m:[0m [0m[33m3[0m[0m[2m,[0m
  [0mWRONG_DOCUMENT_ERR[2m:[0m [0m[33m4[0m[0m[2m,[0m
  [0mINVALID_CHARACTER_ERR[2m:[0m [0m[33m5[0m[0m[2m,[0m
  [0mNO_DATA_ALLOWED_ERR[2m:[0m [0m[33m6[0m[0m[2m,[0m
  [0mNO_MODIFICATION_ALLOWED_ERR[2m:[0m [0m[33m7[0m[0m[2m,[0m
  [0mNOT_FOUND_ERR[2m:[0m [0m[33m8[0m[0m[2m,[0m
  [0mNOT_SUPPORTED_ERR[2m:[0m [0m[33m9[0m[0m[2m,[0m
  [0mINUSE_ATTRIBUTE_ERR[2m:[0m [0m[33m10[0m[0m[2m,[0m
  [0mINVALID_STATE_ERR[2m:[0m [0m[33m11[0m[0m[2m,[0m
  [0mSYNTAX_ERR[2m:[0m [0m[33m12[0m[0m[2m,[0m
  [0mINVALID_MODIFICATION_ERR[2m:[0m [0m[33m13[0m[0m[2m,[0m
  [0mNAMESPACE_ERR[2m:[0m [0m[33m14[0m[0m[2m,[0m
  [0mINVALID_ACCESS_ERR[2m:[0m [0m[33m15[0m[0m[2m,[0m
  [0mVALIDATION_ERR[2m:[0m [0m[33m16[0m[0m[2m,[0m
  [0mTYPE_MISMATCH_ERR[2m:[0m [0m[33m17[0m[0m[2m,[0m
  [0mSECURITY_ERR[2m:[0m [0m[33m18[0m[0m[2m,[0m
  [0mNETWORK_ERR[2m:[0m [0m[33m19[0m[0m[2m,[0m
  [0mABORT_ERR[2m:[0m [0m[33m20[0m[0m[2m,[0m
  [0mURL_MISMATCH_ERR[2m:[0m [0m[33m21[0m[0m[2m,[0m
  [0mQUOTA_EXCEEDED_ERR[2m:[0m [0m[33m22[0m[0m[2m,[0m
  [0mTIMEOUT_ERR[2m:[0m [0m[33m23[0m[0m[2m,[0m
  [0mINVALID_NODE_TYPE_ERR[2m:[0m [0m[33m24[0m[0m[2m,[0m
  [0mDATA_CLONE_ERR[2m:[0m [0m[33m25[0m[0m[2m,[0m
  [0mtoString[2m:[0m [36m[Function: toString][0m[0m[2m,[0m
}[0m
[0m[31mâœ—[0m [0mAPI Endpoint : POST /mcp/tools/process-query[2m >[0m[1m should handle multi-days events add query ("add" intent with refinement)[0m [0m[2m[[0m[33m30000.28ms[0m[2m][0m
  [2m^[0m [31mthis test timed out after 30000ms.[0m
[{"text":"at 10 AM to 11 AM","start":"2025-10-10T17:00:00.000Z","end":"2025-10-10T18:00:00.000Z"},{"text":"at 12 PM to 1 PM","start":"2025-10-10T19:00:00.000Z","end":"2025-10-10T20:00:00.000Z"}]
User Input:  Schedule meeting at 10 AM to 11 AM and lunch at 12 PM to 1 PM tomorrow
classifyIntent is called
events is parsed with regex:  [
  {
    [0msummary[2m:[0m [0m[32m[0m[32m"Schedule meeting"[0m[0m[0m[2m,[0m
    [0mdate[2m:[0m [0m[32m[0m[32m"2025-10-10"[0m[0m[0m[2m,[0m
    [0mstartTime[2m:[0m [0m[32m[0m[32m"10:00"[0m[0m[0m[2m,[0m
    [0mendTime[2m:[0m [0m[32m[0m[32m"11:00"[0m[0m[0m[2m,[0m
    [0mduration_minutes[2m:[0m [0m[33m60[0m[0m[2m,[0m
    [0mtimezone[2m:[0m [0m[32m[0m[32m"America/Los_Angeles"[0m[0m[0m[2m,[0m
    [0mlocation[2m:[0m [0m[32m[0m[32m"10 AM to 11 AM and lunch at 12 PM to 1 PM tomorrow"[0m[0m[0m[2m,[0m
    [0mdisplayTime[2m:[0m [0m[32m[0m[32m"10:00 am"[0m[0m[0m[2m,[0m
  }[0m[2m,[0m {
    [0msummary[2m:[0m [0m[32m[0m[32m"Schedule meeting"[0m[0m[0m[2m,[0m
    [0mdate[2m:[0m [0m[32m[0m[32m"2025-10-10"[0m[0m[0m[2m,[0m
    [0mstartTime[2m:[0m [0m[32m[0m[32m"12:00"[0m[0m[0m[2m,[0m
    [0mendTime[2m:[0m [0m[32m[0m[32m"13:00"[0m[0m[0m[2m,[0m
    [0mduration_minutes[2m:[0m [0m[33m60[0m[0m[2m,[0m
    [0mtimezone[2m:[0m [0m[32m[0m[32m"America/Los_Angeles"[0m[0m[0m[2m,[0m
    [0mlocation[2m:[0m [0m[32m[0m[32m"10 AM to 11 AM and lunch at 12 PM to 1 PM tomorrow"[0m[0m[0m[2m,[0m
    [0mdisplayTime[2m:[0m [0m[32m[0m[32m"12:00 pm"[0m[0m[0m[2m,[0m
  }
]
Regex partial imperfect-refining with LLM
Ready to send Payload:  {
  [0mpartial[2m:[0m [
    {
      [0msummary[2m:[0m [0m[32m[0m[32m"Schedule meeting"[0m[0m[0m[2m,[0m
      [0mdate[2m:[0m [0m[32m[0m[32m"2025-10-10"[0m[0m[0m[2m,[0m
      [0mstartTime[2m:[0m [0m[32m[0m[32m"10:00"[0m[0m[0m[2m,[0m
      [0mendTime[2m:[0m [0m[32m[0m[32m"11:00"[0m[0m[0m[2m,[0m
      [0mduration_minutes[2m:[0m [0m[33m60[0m[0m[2m,[0m
      [0mtimezone[2m:[0m [0m[32m[0m[32m"America/Los_Angeles"[0m[0m[0m[2m,[0m
      [0mlocation[2m:[0m [0m[32m[0m[32m"10 AM to 11 AM and lunch at 12 PM to 1 PM tomorrow"[0m[0m[0m[2m,[0m
      [0mdisplayTime[2m:[0m [0m[32m[0m[32m"10:00 am"[0m[0m[0m[2m,[0m
    }[0m[2m,[0m {
      [0msummary[2m:[0m [0m[32m[0m[32m"Schedule meeting"[0m[0m[0m[2m,[0m
      [0mdate[2m:[0m [0m[32m[0m[32m"2025-10-10"[0m[0m[0m[2m,[0m
      [0mstartTime[2m:[0m [0m[32m[0m[32m"12:00"[0m[0m[0m[2m,[0m
      [0mendTime[2m:[0m [0m[32m[0m[32m"13:00"[0m[0m[0m[2m,[0m
      [0mduration_minutes[2m:[0m [0m[33m60[0m[0m[2m,[0m
      [0mtimezone[2m:[0m [0m[32m[0m[32m"America/Los_Angeles"[0m[0m[0m[2m,[0m
      [0mlocation[2m:[0m [0m[32m[0m[32m"10 AM to 11 AM and lunch at 12 PM to 1 PM tomorrow"[0m[0m[0m[2m,[0m
      [0mdisplayTime[2m:[0m [0m[32m[0m[32m"12:00 pm"[0m[0m[0m[2m,[0m
    }
  ][0m[2m,[0m
  [0minput[2m:[0m [0m[32m[0m[32m"Schedule meeting at 10 AM to 11 AM and lunch at 12 PM to 1 PM tomorrow"[0m[0m[0m[2m,[0m
  [0mtimezone[2m:[0m [0m[32m[0m[32m"America/Los_Angeles"[0m[0m[0m[2m,[0m
  [0mreference_date[2m:[0m [0m[32m[0m[32m"2025-10-15"[0m[0m[0m[2m,[0m
  [0mparsed_results[2m:[0m [
    {
      [0mtext[2m:[0m [0m[32m[0m[32m"at 10 AM to 11 AM"[0m[0m[0m[2m,[0m
      [0mstart[2m:[0m [0m[32m[0m[32m"2025-10-10T17:00:00.000Z"[0m[0m[0m[2m,[0m
      [0mend[2m:[0m [0m[32m[0m[32m"2025-10-10T18:00:00.000Z"[0m[0m[0m[2m,[0m
    }[0m[2m,[0m {
      [0mtext[2m:[0m [0m[32m[0m[32m"at 12 PM to 1 PM"[0m[0m[0m[2m,[0m
      [0mstart[2m:[0m [0m[32m[0m[32m"2025-10-10T19:00:00.000Z"[0m[0m[0m[2m,[0m
      [0mend[2m:[0m [0m[32m[0m[32m"2025-10-10T20:00:00.000Z"[0m[0m[0m[2m,[0m
    }
  ][0m[2m,[0m
}
[0m[31mâœ—[0m [0mAPI Endpoint : POST /mcp/tools/process-query[2m >[0m[1m should handle multi-events in one day add query ("add" intent)[0m [0m[2m[[0m[33m30000.06ms[0m[2m][0m
  [2m^[0m [31mthis test timed out after 30000ms.[0m

 0 pass[0m
[0m[31m 17 fail[0m
Ran 17 tests across 3 files. [0m[2m[[1m408.71s[0m[2m][0m
[1m[7m%[27m[1m[0m                                                                                                                                                                                                                                                            ]2;kyle@kyle:~/Deployments/mcp-server-taskler]1;..erver-taskler[0m[27m[24m[J[01;31mâžœ  [36mmcp-server-taskler[00m [01;34mgit:([31mframework-change[34m)[00m [K[?1h=[?2004he[32me[39m
[0;1;2mcommand[0m
[0me          echo             echotc  echoti  edit    edit-command-line  editor    editres   efibootdump  efibootmgr  egrep    eject           elfedit       elif         else        emulate           enable              enc2xs      encguess
enchant-2  enchant-lsmod-2  end     enosys  env     env_default        envsubst  eog       eps2eps      eqn         esac     escapesrc       escp2topbm    eval         evince      evince-previewer  evince-thumbnailer  evolution   ex     
exch       exec             exit    expand  expiry  export             expr      exr2aces  exrenvmap    exrheader   exrinfo  exrmakepreview  exrmaketiled  exrmanifest  exrmetrics  exrmultipart      exrmultiview        exrstdattr  exr_to_pq
[Jeyuvtoppm  [Jeza              [J                                                                                                                                                                                 [5A[0m[27m[24m[45C[32me[39m[K[32me[32mx[39m[90mit[39m
[J[0;1;2mcommand[0m
[J[0mex  [Jexch  [Jexec  [Jexit  [Jexpand  [Jexpiry  [Jexport  [Jexpr  [Jexr2aces  [Jexrenvmap  [Jexrheader  [Jexrinfo  [Jexrmakepreview  [Jexrmaketiled  [Jexrmanifest  [Jexrmetrics  [Jexrmultipart  [Jexrmultiview  [Jexrstdattr  [Jexr_to_pq  [J[A[A[0m[27m[24m[45C[32mex[39m[90mit[39m[K[32me[32mx[32mi[39m[1m[31me[1m[31mx[1m[31mi[0m[39m
[J[0;1;2mcommand[0m
[J[0mexit[J[A[A[0m[27m[24m[45C[1m[31mexi[0m[39m[90mt[39m[K[1m[31mi[1m[31mt[0m[39m[0m[32me[0m[32mx[0m[32mi[0m[32mt[39m
[J[0;1;2mcommand[0m
[J[0mexit[J[A[A[0m[27m[24m[45C[32mexit[39m[K[?1l>[?2004l
[J[A[49C
[J]2;exit]1;exit
Script done on 2025-10-14 19:07:39-07:00 [COMMAND_EXIT_CODE="1"]
